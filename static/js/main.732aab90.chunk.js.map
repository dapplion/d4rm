{"version":3,"sources":["components/Link.jsx","components/Nav.jsx","services/userForms.js","utils/timeAgo.js","pages/home/Home.jsx","pages/create/isSubmitValid.js","pages/create/isFormValid.js","utils/arrays.js","utils/wrapActions.js","pages/create/FormEditor/redux.js","utils/onEnterKey.js","components/Input.jsx","pages/create/FormEditor/OptionRow.jsx","components/Section.jsx","pages/create/FormEditor/FormEditorRoot.jsx","pages/create/FormEditor/index.js","pages/create/SubmitEditor/redux.js","utils/fromCamelCase.js","utils/newTabProps.js","utils/getUrlBlockExplorer.js","pages/create/SubmitEditor/SubmitEditorRoot.jsx","pages/create/SubmitEditor/index.js","pages/form/FormDisplay.jsx","pages/create/SubmitDisplay.jsx","pages/create/FormRoot.jsx","pages/create/index.js","utils/getUrlProvider.js","services/ipfs.js","services/fetchForm.js","utils/answersCoder.js","utils/hashToBytes32.js","services/ethereumMethods.js","services/fetchSubmissions.js","services/localStorageIds.js","services/signIn/localAccount.js","services/signIn/metamaskAccount.js","services/signIn/SignInDialog.jsx","services/signIn/index.js","utils/getUrlFaucet.js","services/submitAnswers/DelegateOrFaucetDialog.jsx","services/submitAnswers/delegateOrFaucetDialog.js","services/submitAnswers/getMsgParams.js","services/submitAnswers/signAnswers.js","services/submitAnswers/signAnswersWithMetamask.js","services/submitAnswers/validateSignature.js","services/submitAnswers/recoverFromSignedAnswers.js","services/submitAnswers/requestRelaySubmit.js","services/submitAnswers/index.js","pages/form/Answer.jsx","utils/utils.js","pages/form/Results.jsx","pages/form/Form.jsx","components/Loading.jsx","App.jsx","serviceWorker.js","index.js","logo.png","services/submitAnswers/ethSigUtils.js"],"names":["WrappedLink","props","react_default","a","createElement","Link","Object","assign","className","Nav","AppBar_default","id","position","Toolbar_default","to","src","logo","alt","USER_FORMS","EDITED_FORM","getUserForms","userFormsString","localStorage","getItem","JSON","parse","e","console","error","concat","stack","setUserForms","userForms","stringify","setItem","storeUserForm","hash","form","log","objectSpread","defineProperty","title","lastOpenned","Date","now","setEditedForm","formString","TimeAgo","addLocale","en","timeAgo","utils_timeAgo","timestamp","ago","format","includes","FormPreview","_ref","Paper_default","FormatListNumbered_default","OpenInNew_default","Home","_useState","useState","_useState2","slicedToArray","useEffect","_userForms","entries","map","_ref2","_ref3","sort","b","Button_default","variant","color","Boolean","length","_ref4","key","href","style","textDecoration","Joi","require","submitSchema","object","string","allow","valid","required","network","address","formSchema","description","questions","array","items","text","options","swapItems","x","y","_Object$assign","maxIdx","deleteItem","toConsumableArray","slice","wrapActions","actions","types","dispatch","wrappedActions","_loop","_Object$entries","_i","type","action","Error","apply","arguments","setTitle","setDescription","addQuestion","deleteQuestion","addOption","setText","setOption","moveOptionUp","moveOptionDown","deleteOption","i","j","mapDispatchToActions","reducer","option","updateQuestions","fn","updateQuestion","question","onEnterKey","_len","args","Array","_key","charCode","keyCode","Input","value","onValueChange","onEnterPress","objectWithoutProperties","TextField_default","onChange","target","onKeyPress","margin","fullWidth","autoFocus","defaultProps","OptionRow","onUp","onDown","onDelete","KeyboardArrowUp_default","onClick","KeyboardArrowDown_default","RadioButtonUnchecked_default","components_Input","Clear_default","AddOptionRow","onAdd","Section","Fragment","elevation","FormEditor","FormEditorRoot","initialForm","setForm","_useReducer","useReducer","_useReducer2","_useMemo","useMemo","label","InputProps","fontSize","multiline","Delete_default","Add_default","setId","setTo","setNetwork","setAddress","submit","fromCamelCase","undefined","replace","v","toUpperCase","toLowerCase","newTabProps","rel","getContractUrl","getTxUrl","txHash","submitOptions","name","preDeployedPublicContract","ropsten","kovan","rinkeby","goerli","availableNetworks","keys","getSubmitOptionById","_id","find","SubmitEditorRoot","setSubmit","initialSubmit","selectedSubmission","FormControl_default","InputLabel_default","Select_default","MenuItem_default","note","htmlFor","_network","FormDisplay","answers","disabled","setAnswers","component","RadioGroup_default","FormControlLabel_default","String","control","Radio_default","SubmitDisplay","emptyForm","emptySubmit","FormRoot","setInitialForm","_useState3","_useState4","setInitialSubmit","_useState5","_useState6","_setForm","_useState7","_useState8","_setSubmit","_useState9","_useState10","uploading","setUploading","_useState11","_useState12","setError","_useState13","_useState14","setHash","steps","_useDebouncedCallback","useDebouncedCallback","debouncedCallback","newForm","newSubmit","_publish","asyncToGenerator","regenerator_default","mark","_callee","formObj","_hash","wrap","_context","prev","next","window","add","sent","setActiveStep","removeItem","t0","message","finish","stop","this","userEditedForm","getEditedForm","_useState15","_useState16","activeStep","disableNext","validate","isFormValid","isSubmitValid","Stepper_default","alternativeLabel","Step_default","StepLabel_default","stepIndex","create_FormEditor","SubmitEditor","LinearProgress_default","opacity","form_FormDisplay","getStepContent","marginTop","s","publish","projectId","ipfs","ipfsClient","protocol","obj","content","results","Buffer","from","abrupt","cat","_callee2","_context2","toString","services_ipfs","isHash","util","isIPFS","cid","validateForm","isArray","fetchForm","_x","_fetchForm","charactersInBytes32","hexCharactersPerAnswer","maxIndex","Math","pow","encodeAnswers","values","answerIndex","isNaN","parseInt","join","padEnd","decodeAnswers","answersBytes32","parsedAnswers","startChar","endChar","answerIndexHex","push","answer","hashToBytes32","CID","multihash","padStart","web3InstancesCache","getWeb3","withMetamask","networkId","Web3","ethereum","providerUrl","getEthProviderUrl","getBalance","isAddress","eth","getSubmitContract","Contract","sumbitContractAbi","utils","surveyId","submitContract","events","getPastEvents","filter","fromBlock","event","returnValues","transactionHash","user","fetchSubmissions","LOCAL_ACCOUNT","get","accountString","account","localAccount","accounts","create","privateKey","isMetamask","_get","enable","SignInDialog","root","open","onAccount","onClose","metamaskStatus","isMetaMask","available","msg","localAccountStatus","_onLocalAccount","_onMetamask","metamaskAccount","Dialog_default","DialogTitle_default","DialogContent_default","signIn","document","body","appendChild","close","unmountComponentAtNode","Promise","resolve","reject","render","signIn_SignInDialog","faucetUrl","getUrlFaucet","DelegateOrFaucetDialog","onDelegate","onFaucet","maxWidth","width","delegateOrFaucetDialog","submitAnswers_DelegateOrFaucetDialog","getMsgParams","answersBytes","signAnswers","_signAnswers","sig","ethSigUtils","signTypedData","toBuffer","data","signAnswersWithMetamask","msgParams","sendAsync","method","params","err","result","validateSignature","recoveredAddress","recoverTypedSignature","toChecksumAddress","recoverFromSignedAnswers","baseUrl","requestRelaySubmit","userAddress","contractAddress","url","relayParams","relayUrl","URL","pathname","forEach","val","searchParams","set","getRelayUrl","fetch","then","r","submitAnswers","_submitAnswers","useDelegateSubmit","delegateSubmit","directSubmit","methods","send","Answer","setTxHash","submitting","setSubmitting","_onSubmit","submissionHash","answersFulfilled","areAnswersFulfilled","Results","cachedSubmissionsHash","submissions","uniqueAddresses","reduce","users","getUniqueAddresses","questionsResultsPercent","totalResponses","questionsResults","submission","count","round","getQuestionResults","uniqueResponses","percent","Remove_default","role","Loading","CircularProgress_default","Form","_match$params","match","showResults","setSubmissions","loading","setLoading","_fetchFormEffect","_form","fetchFormEffect","_fetchSubmissionsEffect","_submissions","fetchSubmissionsEffect","components_Loading","form_Results","form_Answer","App","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","CssBaseline_default","components_Nav","Switch","Route","path","exact","Create","Component","location","hostname","ReactDOM","HashRouter","src_App","getElementById","navigator","serviceWorker","ready","registration","unregister","module","exports","ethUtil","ethAbi","typedSignatureHash","typedData","schema","soliditySHA3","fill","recoverPublicKey","signature","sigParams","fromRpcSig","ecrecover","getPublicKeyFor","hashPersonalMessage","padWithZeroes","number","myString","concatSig","rSig","fromSigned","sSig","vSig","bufferToInt","rStr","toUnsigned","sStr","vStr","stripHexPrefix","intToHex","addHexPrefix","normalize","input","buffer","bufferToHex","personalSign","msgHash","ecsign","recoverPersonalSignature","publicKey","sender","publicToAddress","extractPublicKey","hashBuffer"],"mappings":"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","file":"static/js/main.732aab90.chunk.js","sourcesContent":["import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nexport default function WrappedLink(props) {\n  return <Link {...props} className=\"router-link\" />;\n}\n","import React from \"react\";\n// Components\nimport Link from \"components/Link\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\n// Styles\nimport logo from \"../logo.png\";\nimport \"./nav.scss\";\n\nconst Nav = () => (\n  <AppBar id=\"nav\" position=\"static\">\n    <Toolbar>\n      <Link to=\"/\">\n        <img src={logo} alt=\"logo\" />\n      </Link>\n    </Toolbar>\n  </AppBar>\n);\n\nexport default Nav;\n","const USER_FORMS = \"USER_FORMS\";\nconst EDITED_FORM = \"EDITED_FORM\";\n\nexport function getUserForms() {\n  const userFormsString = localStorage.getItem(USER_FORMS);\n  if (!userFormsString) return [];\n  try {\n    return JSON.parse(userFormsString);\n  } catch (e) {\n    console.error(`Error parsing user forms: ${e.stack}`);\n    return {};\n  }\n}\n\nexport function setUserForms(userForms) {\n  try {\n    const userFormsString = JSON.stringify(userForms);\n    localStorage.setItem(USER_FORMS, userFormsString);\n  } catch (e) {\n    console.error(`Error storing userForm: ${e.stack}`);\n  }\n}\n\nexport function storeUserForm(hash, form) {\n  console.log(\"storing user form\");\n  setUserForms({\n    ...getUserForms(),\n    [hash]: {\n      title: form.title,\n      lastOpenned: Date.now()\n    }\n  });\n}\n\nexport function removeUserForm(hash) {\n  const userForms = getUserForms();\n  delete userForms[hash];\n  setUserForms(userForms);\n}\n\n// Edited form\n\nexport function getEditedForm() {\n  try {\n    const formString = localStorage.getItem(EDITED_FORM);\n    return formString ? JSON.parse(formString) : null;\n  } catch (e) {\n    console.error(`Error getting user edited form: ${e.stack}`);\n  }\n}\n\nexport function setEditedForm(form) {\n  try {\n    const formString = JSON.stringify(form);\n    localStorage.setItem(EDITED_FORM, formString);\n  } catch (e) {\n    console.error(`Error storing user edited form: ${e.stack}`);\n  }\n}\n\nexport function clearEditedForm() {\n  localStorage.removeItem(EDITED_FORM);\n}\n","import TimeAgo from \"javascript-time-ago\";\nimport en from \"javascript-time-ago/locale/en\";\n\nTimeAgo.addLocale(en);\n\nconst timeAgo = new TimeAgo();\n\nexport default timestamp => {\n  const ago = timeAgo.format(timestamp, \"twitter\");\n  if (!ago) return \"Just now\";\n  if (ago.includes(\" \")) return ago;\n  else return `${ago} ago`;\n};\n","import React, { useState, useEffect } from \"react\";\nimport { getUserForms } from \"services/userForms\";\nimport timeAgo from \"utils/timeAgo\";\n// Components\nimport Button from \"@material-ui/core/Button\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Link from \"components/Link\";\n// Styles\nimport FormatListNumbered from \"@material-ui/icons/FormatListNumbered\";\nimport OpenInNew from \"@material-ui/icons/OpenInNew\";\nimport \"./home.scss\";\n\nfunction FormPreview({ hash, title, lastOpenned }) {\n  return (\n    <Link to={`/${hash}`}>\n      <Paper className=\"form-preview\">\n        <FormatListNumbered className=\"miniature\" />\n        <div className=\"formTitle\">{title}</div>\n        <div className=\"bottom\">\n          <span className=\"time\">Openned {timeAgo(lastOpenned)}</span>{\" \"}\n          {/* <Clear onClick={() => removeUserForm(hash)} /> */}\n          <OpenInNew />\n        </div>\n      </Paper>\n    </Link>\n  );\n}\n\nfunction Home() {\n  const [userForms, setUserForms] = useState([]);\n  useEffect(() => {\n    const _userForms = Object.entries(getUserForms())\n      .map(([hash, form]) => ({\n        ...form,\n        hash\n      }))\n      .sort((a, b) => b.lastOpenned - a.lastOpenned);\n    console.log(\"Got user forms\", _userForms);\n    setUserForms(_userForms);\n  }, []);\n\n  console.log(userForms);\n\n  return (\n    <div id=\"home\">\n      <section>\n        <div className=\"site-width\">\n          <div className=\"title\">\n            Decentralized forms, for decentralized projects\n          </div>\n          <p>Finally a way to collect feedback in a decentralized way</p>\n          <Link to=\"/create\">\n            <Button variant=\"contained\" color=\"primary\">\n              Start a new form\n            </Button>\n          </Link>\n\n          {Boolean(userForms.length) && (\n            <div className=\"recent-forms\">\n              <div className=\"sub-title\">Recent forms</div>\n              <div className=\"user-forms\">\n                {userForms.map(({ hash, title, lastOpenned }) => (\n                  <FormPreview key={hash} {...{ hash, title, lastOpenned }} />\n                ))}\n              </div>\n            </div>\n          )}\n        </div>\n      </section>\n\n      <section>\n        <div className=\"site-width\">\n          <div className=\"title\">Show the world that you believe in Web3</div>\n          <p>\n            Stop relying on google's tools to do the marketing of your\n            decentralized project. Embrace the Web3 concept on corner of your\n            DApp user experience.\n          </p>\n          <p>\n            <a\n              href=\"https://github.com/dapplion/d4rm\"\n              style={{ textDecoration: \"none\" }}\n            >\n              Show me the source code\n            </a>\n          </p>\n        </div>\n      </section>\n    </div>\n  );\n}\n\nexport default Home;\n","const Joi = require(\"joi\");\n\nconst submitSchema = Joi.object({\n  id: Joi.string().allow(\"\"),\n  to: Joi.string()\n    .valid(\"smartContract\")\n    .required(),\n  network: Joi.string().required(),\n  address: Joi.string().required()\n});\n\nexport default function isSubmitValid(submit) {\n  const result = Joi.validate(submit, submitSchema.required());\n  return !result.error;\n}\n","const Joi = require(\"joi\");\n\nconst formSchema = Joi.object({\n  title: Joi.string().required(),\n  description: Joi.string()\n    .allow(\"\")\n    .required(),\n  questions: Joi.array()\n    .items(\n      Joi.object({\n        text: Joi.string().required(),\n        options: Joi.array()\n          .items(\n            Joi.string()\n              .allow(\"\")\n              .required()\n          )\n          .required()\n      }).required()\n    )\n    .required()\n});\n\nexport default function isFormValid(form) {\n  const result = Joi.validate(form, formSchema.required());\n  return !result.error;\n}\n","/**\n * Swaps index x with index y\n * [NOTE] Tolerates ilegal indexes. In that case returns the original array\n * @param {array} array\n * @param {number} x first index to swap\n * @param {number} y second index to swap\n * @returns {array}\n */\nexport function swapItems(array, x, y) {\n  const minIdx = 0;\n  const maxIdx = array.length - 1;\n  if (x < minIdx || y < minIdx || x > maxIdx || y > maxIdx || x === y)\n    return array;\n  return Object.assign([], array, {\n    [x]: array[y],\n    [y]: array[x]\n  });\n}\n\n/**\n * Deletes index x\n * [NOTE] Tolerates ilegal indexes. In that case returns the original array\n * @param {array} array\n * @param {number} x index to delete\n * @returns {array}\n */\nexport function deleteItem(array, x) {\n  if (x < 0 || x > array.length - 1) return array;\n  return [...array.slice(0, x), ...array.slice(x + 1)];\n}\n","export default function wrapActions(actions, types, dispatch) {\n  const wrappedActions = {};\n  for (const [type, action] of Object.entries(actions)) {\n    if (!types[type]) throw Error(`No type defined for action key: ${type}`);\n    wrappedActions[type] = (...args) =>\n      dispatch({ type: types[type], ...action(...args) });\n  }\n  return wrappedActions;\n}\n","import { swapItems, deleteItem } from \"utils/arrays\";\nimport wrapActions from \"utils/wrapActions\";\n\nconst types = {\n  setTitle: \"setTitle\",\n  setDescription: \"setDescription\",\n  addQuestion: \"addQuestion\",\n  deleteQuestion: \"deleteQuestion\",\n  addOption: \"addOption\",\n  setText: \"setText\",\n  setOption: \"setOption\",\n  moveOptionUp: \"moveOptionUp\",\n  moveOptionDown: \"moveOptionDown\",\n  deleteOption: \"deleteOption\"\n};\n\nconst actions = {\n  setTitle: title => ({ title }),\n  setDescription: description => ({ description }),\n  addQuestion: () => {},\n  deleteQuestion: i => ({ i }),\n  addOption: i => ({ i }),\n  setText: (i, text) => ({ i, text }),\n  setOption: (i, j, text) => ({ i, j, text }),\n  moveOptionUp: (i, j) => ({ i, j }),\n  moveOptionDown: (i, j) => ({ i, j }),\n  deleteOption: (i, j) => ({ i, j })\n};\n\nexport const mapDispatchToActions = dispatch =>\n  wrapActions(actions, types, dispatch);\n\nexport function reducer(form, action) {\n  /**\n   * Custom reducer helpers to isolate the logic\n   */\n  const updateQuestions = fn => ({\n    ...form,\n    questions: fn(form.questions)\n  });\n  const updateQuestion = (i, fn) =>\n    updateQuestions(questions =>\n      Object.assign([], questions, {\n        [i]: { ...questions[i], ...fn(questions[i]) }\n      })\n    );\n  const updateOption = (i, j, option) =>\n    updateQuestion(i, question => ({\n      options: Object.assign([], question.options, { [j]: option })\n    }));\n\n  /**\n   * Reducers are in the same order as types and actions\n   */\n  switch (action.type) {\n    case types.setTitle:\n      return { ...form, title: action.title };\n    case types.setDescription:\n      return { ...form, description: action.description };\n\n    case types.addQuestion:\n      return updateQuestions(questions => [\n        ...questions,\n        { text: \"\", options: [] }\n      ]);\n    case types.deleteQuestion:\n      return updateQuestions(questions => deleteItem(questions, action.i));\n\n    case types.addOption:\n      return updateQuestion(action.i, question => ({\n        options: [...question.options, \"\"]\n      }));\n    case types.setText:\n      return updateQuestion(action.i, () => ({ text: action.text }));\n    case types.setOption:\n      return updateOption(action.i, action.j, action.text);\n    case types.moveOptionUp:\n      return updateQuestion(action.i, question => ({\n        options: swapItems(question.options, action.j, action.j - 1)\n      }));\n    case types.moveOptionDown:\n      return updateQuestion(action.i, question => ({\n        options: swapItems(question.options, action.j, action.j + 1)\n      }));\n    case types.deleteOption:\n      return updateQuestion(action.i, question => ({\n        options: deleteItem(question.options, action.j)\n      }));\n    default:\n      throw new Error(\"Unknown action\");\n  }\n}\n","/**\n * To be used on html prop `onKeyDown`\n * onKeyDown={onEnterKey(method, arg1, arg2)}\n * @param {Function} fn\n * @param  {...any} args\n */\nexport default function onEnterKey(fn, ...args) {\n  return e => {\n    const key = e.charCode ? e.charCode : e.keyCode ? e.keyCode : 0;\n    if (key === 13) fn(...args);\n  };\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport TextField from \"@material-ui/core/TextField\";\nimport onEnterKey from \"utils/onEnterKey\";\n\nfunction Input({ value, onValueChange, onEnterPress, ...props }) {\n  return (\n    <TextField\n      value={value}\n      onChange={e => onValueChange(e.target.value)}\n      onKeyPress={onEnterKey(onEnterPress)}\n      margin=\"normal\"\n      fullWidth={true}\n      autoFocus={true}\n      {...props}\n    />\n  );\n}\n\nInput.propTypes = {\n  value: PropTypes.string.isRequired,\n  onValueChange: PropTypes.func.isRequired,\n  onEnterPress: PropTypes.func\n};\nInput.defaultProps = {\n  onEnterPress: () => {}\n};\n\nexport default Input;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n// Components\nimport Button from \"@material-ui/core/Button\";\nimport Input from \"components/Input\";\n// Icons\nimport Clear from \"@material-ui/icons/Clear\";\nimport KeyboardArrowUp from \"@material-ui/icons/KeyboardArrowUp\";\nimport KeyboardArrowDown from \"@material-ui/icons/KeyboardArrowDown\";\nimport RadioButtonUnchecked from \"@material-ui/icons/RadioButtonUnchecked\";\n\nexport function OptionRow({\n  value,\n  onValueChange,\n  onEnterPress,\n  onUp,\n  onDown,\n  onDelete\n}) {\n  return (\n    <div className=\"option-row\">\n      <span className=\"arrows\">\n        <KeyboardArrowUp onClick={onUp} />\n        <KeyboardArrowDown onClick={onDown} />\n      </span>\n      <span>\n        <RadioButtonUnchecked className=\"circle\" />\n      </span>\n      <span className=\"text\">\n        <Input\n          value={value}\n          onValueChange={onValueChange}\n          onEnterPress={onEnterPress}\n          margin=\"none\"\n          className=\"option-row-input\"\n        />\n      </span>\n      <span className=\"delete\">\n        <Clear onClick={onDelete} />\n      </span>\n    </div>\n  );\n}\n\nOptionRow.propTypes = {\n  value: PropTypes.string.isRequired,\n  onValueChange: PropTypes.func.isRequired,\n  onEnterPress: PropTypes.func,\n  onUp: PropTypes.func.isRequired,\n  onDown: PropTypes.func.isRequired,\n  onDelete: PropTypes.func.isRequired\n};\nOptionRow.defaultProps = {\n  onEnterPress: () => {}\n};\n\nexport function AddOptionRow({ onAdd }) {\n  return (\n    <div className=\"option-row add-option\">\n      <span className=\"arrows\" />\n      <span>\n        <RadioButtonUnchecked className=\"circle\" />\n      </span>\n      <span className=\"text\" onClick={onAdd}>\n        <Button>Add option</Button>\n      </span>\n      <span className=\"delete\" />\n    </div>\n  );\n}\n\nAddOptionRow.propTypes = {\n  onAdd: PropTypes.func.isRequired\n};\n","import React from \"react\";\nimport Paper from \"@material-ui/core/Paper\";\n\nexport default function Section(props) {\n  return (\n    <>\n      <div className=\"paper-section-topline\" />\n      <Paper\n        {...props}\n        elevation={1}\n        className={`paper-section ${props.className}`}\n      />\n    </>\n  );\n}\n","import React, { useReducer, useMemo, useEffect } from \"react\";\n// Redux\nimport { reducer, mapDispatchToActions } from \"./redux\";\n// Components\nimport { OptionRow, AddOptionRow } from \"./OptionRow\";\nimport Input from \"components/Input\";\nimport Section from \"components/Section\";\n// Icons\nimport Delete from \"@material-ui/icons/Delete\";\nimport Add from \"@material-ui/icons/Add\";\n\nfunction FormEditor({ initialForm, setForm }) {\n  const [form, dispatch] = useReducer(reducer, initialForm);\n\n  const { title, description, questions } = form;\n\n  // Wrapping in useMemo to compute it only once\n  const {\n    setTitle,\n    setDescription,\n    addQuestion,\n    deleteQuestion,\n    addOption,\n    setText,\n    setOption,\n    moveOptionUp,\n    moveOptionDown,\n    deleteOption\n  } = useMemo(() => mapDispatchToActions(dispatch), []);\n\n  useEffect(() => {\n    // Forward formatted form to the parent component\n    setForm(form);\n  }, [form]);\n\n  return (\n    <>\n      <Section>\n        <div className=\"header\">\n          <Input\n            label=\"Form title\"\n            value={title}\n            onValueChange={setTitle}\n            InputProps={{ style: { fontSize: \"2.5rem\" } }}\n          />\n          <Input\n            label=\"Form description\"\n            value={description}\n            onValueChange={setDescription}\n            multiline={true}\n          />\n        </div>\n      </Section>\n\n      {questions.map(({ text, options }, i) => (\n        <Section key={i} className=\"question\">\n          <div className=\"header\">\n            <Input\n              label={`${i + 1}. Question text`}\n              value={text}\n              onValueChange={value => setText(i, value)}\n              onEnterPress={() => addOption(i)}\n              margin=\"none\"\n            />\n            <Delete onClick={() => deleteQuestion(i)} />\n          </div>\n\n          <div className=\"options\">\n            {options.map((option, j) => (\n              <OptionRow\n                key={j}\n                value={option}\n                onValueChange={value => setOption(i, j, value)}\n                onUp={() => moveOptionUp(i, j)}\n                onDown={() => moveOptionDown(i, j)}\n                onDelete={() => deleteOption(i, j)}\n                onEnterPress={() =>\n                  j === options.length - 1 ? addOption(i) : null\n                }\n              />\n            ))}\n            <AddOptionRow onAdd={() => addOption(i)} />\n          </div>\n        </Section>\n      ))}\n\n      <Section className=\"add-question\" onClick={addQuestion}>\n        <Add className=\"button-svg\" />\n        Add question\n        <div id=\"gradient\" />\n      </Section>\n    </>\n  );\n}\n\nexport default FormEditor;\n","import FormEditorRoot from \"./FormEditorRoot\";\n\nexport default FormEditorRoot;\n","import wrapActions from \"utils/wrapActions\";\n\nconst types = {\n  setId: \"setId\",\n  setTo: \"setTo\",\n  setNetwork: \"setNetwork\",\n  setAddress: \"setAddress\"\n};\n\nconst actions = {\n  setId: id => ({ id }),\n  setTo: to => ({ to }),\n  setNetwork: network => ({ network }),\n  setAddress: address => ({ address })\n};\n\nexport const mapDispatchToActions = dispatch =>\n  wrapActions(actions, types, dispatch);\n\nexport function reducer(submit, action) {\n  /**\n   * Reducers are in the same order as types and actions\n   */\n  switch (action.type) {\n    case types.setId:\n      return { ...submit, id: action.id };\n    case types.setTo:\n      return { ...submit, to: action.to };\n    case types.setNetwork:\n      return { ...submit, network: action.network };\n    case types.setAddress:\n      return { ...submit, address: action.address };\n\n    default:\n      throw new Error(\"Unknown action\");\n  }\n}\n","export default function fromCamelCase(s = \"\") {\n  return s.replace(/^[a-z]|[A-Z]/g, function(v, i) {\n    return i === 0 ? v.toUpperCase() : \" \" + v.toLowerCase();\n  });\n}\n","// Props to be passed to a JSX <a> element to open a new tab\n// The purpose of this utility is to centralize this props.\n// To disable the newTab openning for certain <a> from the whole project, edit this file\n//\n// It converts:\n//   <a href={url} rel=\"noopener noreferrer\" target=\"_blank\">\n// Into:\n//   <a href={url} {...newTabProps}>\n\nexport default { rel: \"noopener noreferrer\", target: \"_blank\" };\n","export function getContractUrl(network, address) {\n  return `https://${network}.etherscan.io/address/${address}`;\n}\n\nexport function getTxUrl(network, txHash) {\n  return `https://${network}.etherscan.io/tx/${txHash}`;\n}\n","import React, { useReducer, useMemo, useEffect } from \"react\";\n// Redux\nimport { reducer, mapDispatchToActions } from \"./redux\";\n// Components\nimport Section from \"components/Section\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport Select from \"@material-ui/core/Select\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\n// Icons\nimport fromCamelCase from \"utils/fromCamelCase\";\nimport newTabProps from \"utils/newTabProps\";\nimport { getContractUrl } from \"utils/getUrlBlockExplorer\";\n\nconst submitOptions = [\n  {\n    name: \"Generic smart contract (default)\",\n    description:\n      \"Submissions will be directed to a generic form submission smart contract already deployed, which can handle multiple surveys at once. This is the default method for non-technical users, and since the contract is already deployed, publishing the form will be free.\",\n    value: \"smartContract\",\n    id: \"genericSmartContract\"\n  }\n  // {\n  //   name: \"New smart contract, specific to this form\",\n  //   description:\n  //     \"A new smart contract will be deployed when publishing the form. Submissions will be directed to it, and it should only serve this specific survey\",\n  //   note:\n  //     \"Only recommended for advanced users. You will have to deploy a contract and pay the transaction network's transaction fees\",\n  //   value: \"smartContract\",\n  //   id: \"newSmartContract\"\n  // }\n];\n\n// const keylessDeployedAddress = \"0xA56678Bc585cdB7Fdcd24176401BDf8D24927505\";\nconst keylessDeployedAddressWithDelegateSubmit =\n  \"0x24C273e60D9e3C68662DDC769Afcd23Ad67EfF68\";\nconst preDeployedPublicContract = {\n  ropsten: keylessDeployedAddressWithDelegateSubmit,\n  kovan: keylessDeployedAddressWithDelegateSubmit,\n  rinkeby: keylessDeployedAddressWithDelegateSubmit,\n  goerli: keylessDeployedAddressWithDelegateSubmit\n};\n\nconst availableNetworks = Object.keys(preDeployedPublicContract);\n\nfunction getSubmitOptionById(_id) {\n  return submitOptions.find(({ id }) => id === _id);\n}\n\nfunction getSubmitOptionValue(_id) {\n  return (getSubmitOptionById(_id) || {}).value;\n}\n\n// rinkeby demo contract \"0x77E91Ab5af418A6154637216d596d75eB8ecf70a\"\n\nfunction SubmitEditorRoot({ setSubmit, initialSubmit }) {\n  const [submit, dispatch] = useReducer(reducer, initialSubmit);\n\n  const { id, to, network, address } = submit;\n\n  // Wrapping in useMemo to compute it only once\n  const { setId, setTo, setNetwork, setAddress } = useMemo(\n    () => mapDispatchToActions(dispatch),\n    []\n  );\n\n  //   const invalidAddress = address && !isAddress(address);\n\n  const selectedSubmission = getSubmitOptionById(id);\n\n  useEffect(() => {\n    // Forward formatted submit object to the parent component\n    setSubmit(submit);\n  }, [submit]);\n\n  // Auto-select the predeployed address\n  useEffect(() => {\n    if (id === \"genericSmartContract\")\n      setAddress(preDeployedPublicContract[network]);\n  }, [selectedSubmission, network]);\n\n  return (\n    <>\n      <Section className=\"submit-mechanism\">\n        <div className=\"title\">Submission mechanism</div>\n        <p>Specify how to aggregate user's answers.</p>\n\n        <div>\n          <FormControl fullWidth={true}>\n            <InputLabel>Submit to</InputLabel>\n            <Select\n              value={id || \"\"}\n              onChange={e => {\n                const id = e.target.value;\n                setId(id);\n                setTo(getSubmitOptionValue(id));\n              }}\n            >\n              {submitOptions.map(({ name, id }, i) => (\n                <MenuItem key={i} value={id}>\n                  {name}\n                </MenuItem>\n              ))}\n            </Select>\n          </FormControl>\n        </div>\n\n        {selectedSubmission && (\n          <>\n            <p>{selectedSubmission.description}</p>\n            {selectedSubmission.note && (\n              <p className=\"alert\">\n                <strong>Note: </strong>\n                {selectedSubmission.note}\n              </p>\n            )}\n          </>\n        )}\n\n        {to === \"smartContract\" && (\n          <>\n            <FormControl className=\"select\">\n              <InputLabel htmlFor=\"age-simple\">Choose network</InputLabel>\n              <Select\n                value={network || \"\"}\n                onChange={e => setNetwork(e.target.value)}\n              >\n                {availableNetworks.map(_network => (\n                  <MenuItem key={_network} value={_network}>\n                    {fromCamelCase(_network)}\n                  </MenuItem>\n                ))}\n              </Select>\n            </FormControl>\n\n            {address && (\n              <p className=\"at-address\">\n                At address{\" \"}\n                <a href={getContractUrl(network, address)} {...newTabProps}>\n                  {address}\n                </a>\n              </p>\n            )}\n          </>\n        )}\n      </Section>\n    </>\n  );\n}\n\nexport default SubmitEditorRoot;\n","import SubmitEditorRoot from \"./SubmitEditorRoot\";\n\nexport default SubmitEditorRoot;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n// Components\nimport FormControl from \"@material-ui/core/FormControl\";\nimport RadioGroup from \"@material-ui/core/RadioGroup\";\nimport Radio from \"@material-ui/core/Radio\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\n\nfunction FormDisplay({\n  title,\n  description,\n  questions,\n  answers,\n  disabled,\n  setAnswers\n}) {\n  return (\n    <>\n      <div className=\"header\">\n        <div className=\"title\">{title}</div>\n        <p className=\"description\">{description}</p>\n      </div>\n\n      {questions.map(({ text, options }, i) => {\n        return (\n          <div key={i} className=\"form-question\">\n            <div className=\"text\">{text}</div>\n            <FormControl component=\"fieldset\">\n              <RadioGroup\n                value={answers[i]}\n                onChange={e => {\n                  setAnswers({ ...answers, [i]: e.target.value });\n                }}\n              >\n                {options.map((option, j) => (\n                  <FormControlLabel\n                    key={j}\n                    value={String(j)}\n                    control={<Radio color=\"primary\" />}\n                    label={option}\n                    className=\"form-option\"\n                    disabled={disabled}\n                  />\n                ))}\n              </RadioGroup>\n            </FormControl>\n          </div>\n        );\n      })}\n    </>\n  );\n}\n\nFormDisplay.propTypes = {\n  title: PropTypes.string.isRequired,\n  description: PropTypes.string,\n  questions: PropTypes.arrayOf(\n    PropTypes.shape({\n      text: PropTypes.string.isRequired,\n      options: PropTypes.arrayOf(PropTypes.string)\n    })\n  ).isRequired,\n  answers: PropTypes.object,\n  disabled: PropTypes.bool,\n  setAnswers: PropTypes.func\n};\nFormDisplay.defaultProps = {\n  answers: {},\n  disabled: false,\n  setAnswers: () => {}\n};\n\nexport default FormDisplay;\n","import React from \"react\";\nimport fromCamelCase from \"utils/fromCamelCase\";\n\nexport default function SubmitDisplay({ submit }) {\n  return (\n    <>\n      <h5>Submissions</h5>\n      <p>\n        Submit to {fromCamelCase(submit.to)} at {submit.network}{\" \"}\n        {submit.address}\n      </p>\n    </>\n  );\n}\n","import React, { useState, useEffect } from \"react\";\nimport {\n  storeUserForm,\n  setEditedForm,\n  getEditedForm,\n  clearEditedForm\n} from \"services/userForms\";\nimport isSubmitValid from \"./isSubmitValid\";\nimport isFormValid from \"./isFormValid\";\nimport useDebouncedCallback from \"use-debounce/lib/callback\";\n// Components\nimport FormEditor from \"./FormEditor\";\nimport SubmitEditor from \"./SubmitEditor\";\nimport FormDisplay from \"pages/form/FormDisplay\";\nimport SubmitDisplay from \"./SubmitDisplay\";\nimport Section from \"components/Section\";\nimport Link from \"components/Link\";\nimport LinearProgress from \"@material-ui/core/LinearProgress\";\nimport Button from \"@material-ui/core/Button\";\nimport Stepper from \"@material-ui/core/Stepper\";\nimport Step from \"@material-ui/core/Step\";\nimport StepLabel from \"@material-ui/core/StepLabel\";\n// Styles\nimport \"./create.scss\";\n\nconst emptyForm = {\n  title: \"\",\n  description: \"\",\n  questions: [{ text: \"\", options: [] }]\n};\nconst emptySubmit = {\n  to: \"\",\n  network: \"\"\n};\n\nfunction FormRoot() {\n  const [initialForm, setInitialForm] = useState(emptyForm);\n  const [initialSubmit, setInitialSubmit] = useState(emptySubmit);\n  const [form, _setForm] = useState(initialForm);\n  const [submit, _setSubmit] = useState(initialSubmit);\n  // Upload process\n  const [uploading, setUploading] = useState(false);\n  const [error, setError] = useState(\"\");\n  const [hash, setHash] = useState(\"\");\n\n  const steps = [\"Create form\", \"Choose submimission\", \"Publish\"];\n\n  /**\n   * Persist the form being edited.\n   * Use debouncing to prevent too many calls to JSON.stringify\n   */\n  const [debouncedCallback] = useDebouncedCallback(setEditedForm, 1000, []);\n  function setForm(newForm) {\n    _setForm(newForm);\n    debouncedCallback({ ...newForm, submit });\n  }\n  function setSubmit(newSubmit) {\n    _setSubmit(newSubmit);\n    debouncedCallback({ ...form, submit: newSubmit });\n  }\n\n  useEffect(() => {\n    const userEditedForm = getEditedForm();\n    if (userEditedForm) {\n      setInitialForm({\n        title: userEditedForm.title,\n        description: userEditedForm.description,\n        questions: userEditedForm.questions\n      });\n      setInitialSubmit(userEditedForm.submit);\n    }\n  }, []);\n\n  function getStepContent(stepIndex) {\n    switch (stepIndex) {\n      case 0:\n        return <FormEditor {...{ setForm, initialForm }} />;\n      case 1:\n        return <SubmitEditor {...{ setSubmit, initialSubmit }} />;\n      case 2:\n        return (\n          <>\n            <Section className=\"submit-mechanism\">\n              {uploading ? (\n                <>\n                  <p>Uploading...</p>\n                  <LinearProgress />\n                </>\n              ) : error ? (\n                <div style={{ color: \"red\" }}>Error publishing: {error}</div>\n              ) : (\n                <>\n                  <div className=\"title\">Review and confirm form</div>\n                  <Section style={{ opacity: 0.75 }}>\n                    <FormDisplay {...{ ...form, disabled: true }} />\n                    <SubmitDisplay {...{ submit }} />\n                  </Section>\n                </>\n              )}\n            </Section>\n          </>\n        );\n      case 3:\n        return (\n          <>\n            <Section>\n              <p>Form successfully uploaded</p>\n              <Link to={`/${hash}`}>\n                <Button variant=\"contained\" color=\"primary\">\n                  View form\n                </Button>\n              </Link>\n            </Section>\n          </>\n        );\n      default:\n        return \"Unknown stepIndex\";\n    }\n  }\n\n  async function publish() {\n    setUploading(true);\n    setError(\"\");\n    setHash(\"\");\n    try {\n      const formObj = {\n        title: form.title,\n        description: form.description,\n        questions: form.questions,\n        submit: {\n          to: submit.to,\n          network: submit.network,\n          address: submit.address\n        }\n      };\n      console.log(\"Uploading form object\", formObj);\n      const hash = await window.add(formObj);\n      setHash(hash);\n      storeUserForm(hash, formObj);\n      setActiveStep(3);\n      // Clear stored data\n      clearEditedForm();\n      setInitialForm(emptyForm);\n      setInitialSubmit(emptySubmit);\n    } catch (e) {\n      console.error(`Error uploading formObj: ${e.stack}`);\n      setError(e.message);\n    } finally {\n      setUploading(false);\n    }\n  }\n\n  const [activeStep, setActiveStep] = useState(0);\n\n  const disableNext =\n    (activeStep === 0 && !isFormValid(form)) ||\n    (activeStep === 1 && !isSubmitValid(submit));\n\n  return (\n    <div id=\"create\" className=\"site-width main-section\">\n      <div>\n        <Stepper activeStep={activeStep} alternativeLabel>\n          {steps.map(label => (\n            <Step key={label}>\n              <StepLabel>{label}</StepLabel>\n            </Step>\n          ))}\n        </Stepper>\n\n        {getStepContent(activeStep)}\n        <div style={{ marginTop: \"2rem\" }}>\n          {activeStep < steps.length && (\n            <>\n              <Button\n                disabled={activeStep === 0}\n                onClick={() => setActiveStep(s => s - 1)}\n              >\n                Back\n              </Button>\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                disabled={disableNext}\n                onClick={() => {\n                  if (activeStep === 2) publish();\n                  else setActiveStep(s => s + 1);\n                }}\n              >\n                {activeStep === steps.length - 1 ? \"Publish\" : \"Next\"}\n              </Button>\n            </>\n          )}\n        </div>\n      </div>\n\n      <div className=\"mt-5\" />\n    </div>\n  );\n}\n\nexport default FormRoot;\n","import FormRoot from \"./FormRoot\";\n\nexport default FormRoot;\n","const projectId = \"89b12e3b00cf40f5ae26cc72b3284a44\";\n\nexport function getEthProviderUrl(network) {\n  return `https://${network}.infura.io/v3/${projectId}`;\n}\n\nexport function getIpfsProviderUrl() {\n  return \"ipfs.infura.io\";\n}\n","import ipfsClient from \"ipfs-http-client\";\nimport { getIpfsProviderUrl } from \"utils/getUrlProvider\";\n\nconst providerUrl = getIpfsProviderUrl();\nconst ipfs = ipfsClient(providerUrl, \"5001\", { protocol: \"https\" });\nwindow.ipfs = ipfs;\n\nasync function add(obj) {\n  const string = JSON.stringify(obj);\n  const content = ipfs.types.Buffer.from(string);\n  const results = await ipfs.add(content);\n  return results[0].hash; // \"Qm...WW\"\n}\n\nasync function cat(hash) {\n  const content = await ipfs.cat(hash);\n  const string = content.toString(\"utf8\");\n  return JSON.parse(string);\n}\n\nfunction isHash(hash) {\n  return ipfs.util.isIPFS.cid(hash);\n}\n\nwindow.add = add;\nwindow.cat = cat;\n\nexport default { add, cat, isHash };\n","import ipfs from \"services/ipfs\";\n\nfunction validateForm(form) {\n  if (!form.title) throw Error(\"Invalid form: Must contain a title\");\n  if (!form.questions || !Array.isArray(form.questions))\n    throw Error(\"Invalid form: Must contain questions\");\n  if (!form.submit)\n    throw Error(\"Invalid form: Must contain submit specification\");\n\n  // Make old forms compatible\n  // ###### DEV remove\n  form.questions = form.questions.map(({ text, title, options, answers }) => ({\n    text: text || title,\n    options: options || answers\n  }));\n  return form;\n}\n\nexport default async function fetchForm(hash) {\n  if (!ipfs.isHash(hash)) throw Error(`Invalid IPFS hash: ${hash}`);\n  let form = await ipfs.cat(hash);\n  form = validateForm(form);\n  return form;\n}\n","const charactersInBytes32 = 64;\nconst hexCharactersPerAnswer = 1;\nconst maxIndex = 16 ** hexCharactersPerAnswer - 1;\n\n/**\n * Encodes the answers\n *\n * @param {array} answers = [3, 1]\n * @returns {string} bytes32: 0x31000000000000000000...\n */\nexport function encodeAnswers(answers) {\n  if (!answers) throw Error(\"answers must be defined\");\n\n  const answerIds = Object.values(answers).map(answerIndex => {\n    if (isNaN(answerIndex)) throw Error(\"Answer index must be a number\");\n    if (answerIndex > maxIndex)\n      throw Error(\n        `Max number of possible answers for questions is ${maxIndex}`\n      );\n    return parseInt(answerIndex).toString(16);\n  });\n  return \"0x\" + answerIds.join(\"\").padEnd(charactersInBytes32, \"0\");\n}\n\n/**\n * Decodes the answers\n *\n * @param {string} bytes32: 0x31000000000000000000...\n * @returns {array}\n */\nexport function decodeAnswers(answersBytes32, questions) {\n  if (!answersBytes32 || typeof answersBytes32 !== \"string\")\n    throw Error(\"answersBytes32 must be a string\");\n\n  answersBytes32 = answersBytes32.replace(\"0x\", \"\");\n  const parsedAnswers = [];\n  for (let i = 0; i < questions.length; i++) {\n    const startChar = i * hexCharactersPerAnswer;\n    const endChar = startChar + hexCharactersPerAnswer;\n    const answerIndexHex = answersBytes32.slice(startChar, endChar);\n    const answerIndex = parseInt(answerIndexHex, 16);\n    parsedAnswers.push({\n      title: questions[i].title,\n      answer: questions[i].options[answerIndex],\n      answerIndex\n    });\n  }\n  return parsedAnswers;\n}\n","import CID from \"cids\";\n\n/**\n * @param {string} IPFS encoded hash: \"Qma7dh322...\"\n * @returns {string} bytes32: \"0x3011ab30911ba...\"\n */\nexport default function hashToBytes32(hash) {\n  if (!hash) throw Error(\"hash must be defined\");\n\n  const cid = new CID(hash);\n  return (\n    \"0x\" +\n    cid.multihash\n      .slice(2, 64)\n      .toString(\"hex\")\n      .padStart(64, \"0\")\n  );\n}\n","import { getEthProviderUrl } from \"utils/getUrlProvider\";\nimport Web3 from \"web3\";\n// Abis\nimport sumbitContractAbi from \"contracts/sumbitContractAbi.json\";\n\n/**\n * Wrapper for interacting with web3 methods\n */\n\nlet web3InstancesCache = {};\nfunction getWeb3(network, withMetamask) {\n  const networkId = `${network}-${withMetamask}`;\n  if (!network) throw Error(\"network must be defined\");\n  if (!web3InstancesCache[networkId]) {\n    if (withMetamask) {\n      web3InstancesCache[networkId] = new Web3(window.ethereum);\n    } else {\n      const providerUrl = getEthProviderUrl(network);\n      web3InstancesCache[networkId] = new Web3(providerUrl);\n    }\n  }\n  return web3InstancesCache[networkId];\n}\n\nexport function getBalance(address, network) {\n  if (!isAddress(address)) throw Error(`address is not valid: ${address}`);\n  const web3 = getWeb3(network);\n  return web3.eth.getBalance(address);\n}\n\nexport function getSubmitContract({ address, network, withMetamask }) {\n  if (!isAddress(address)) throw Error(`address is not valid: ${address}`);\n  const web3 = getWeb3(network, withMetamask);\n  return new web3.eth.Contract(sumbitContractAbi, address);\n}\n\n// Utils\n\nexport function isAddress(address) {\n  return Web3.utils.isAddress(address);\n}\n","import { decodeAnswers } from \"utils/answersCoder\";\nimport hashToBytes32 from \"utils/hashToBytes32\";\nimport { getSubmitContract } from \"services/ethereumMethods\";\n\nasync function fetchSubmissions({ hash, network, address, questions }) {\n  const surveyId = hashToBytes32(hash);\n\n  // Parse existing answers\n  const submitContract = getSubmitContract({ address, network });\n  const events = await submitContract.getPastEvents(\"Submission\", {\n    filter: { surveyId },\n    fromBlock: \"0\"\n  });\n  console.log(`events at submission contract ${network} ${address}`, events);\n\n  return events.map(event => {\n    const answersBytes32 = event.returnValues.answers || \"\";\n    const parsedAnswers = decodeAnswers(answersBytes32, questions);\n\n    return {\n      answers: parsedAnswers,\n      txHash: event.transactionHash,\n      user: event.returnValues.user\n    };\n  });\n}\n\nexport default fetchSubmissions;\n","export const LOCAL_ACCOUNT = \"LOCAL_ACCOUNT\";\n","import Web3 from \"web3\";\nimport { LOCAL_ACCOUNT } from \"services/localStorageIds\";\n\n/**\n * @returns {object} status = {\n *   available: {bool}\n *   msg: {string} \"Error description\"\n * }\n */\nexport function status() {\n  if (localStorage.getItem(LOCAL_ACCOUNT)) {\n    return { available: true };\n  } else {\n    return { available: false };\n  }\n}\n\n/**\n * @returns {object} account = {\n *   address: {string} \"0x1234abcd...\",\n *   privateKey: {string} \"0x9876fedc...\",\n *   isMetamask: {bool} false\n * }\n */\nexport function get() {\n  const accountString = localStorage.getItem(LOCAL_ACCOUNT);\n  const account = accountString ? JSON.parse(accountString) : create();\n  return {\n    ...account,\n    isMetamask: false\n  };\n}\n\n// Utils\n\nfunction create() {\n  const web3 = new Web3();\n  const localAccount = web3.eth.accounts.create();\n  const account = {\n    address: localAccount.address,\n    privateKey: localAccount.privateKey\n  };\n  localStorage.setItem(LOCAL_ACCOUNT, JSON.stringify(account));\n  return account;\n}\n","const ethereum = window.ethereum;\n\n/**\n * @returns {object} status = {\n *   available: {bool}\n *   msg: {string} \"Error description\"\n * }\n */\nexport function status() {\n  if (typeof ethereum !== \"undefined\") {\n    if (!ethereum.isMetaMask || !ethereum.enable) {\n      return { available: false, msg: \"Metamask not installed\" };\n    } else {\n      return { available: true };\n    }\n  } else {\n    // Only modern Metamask versions are supported\n    return { available: false, msg: \"No Metamask detect\" };\n  }\n}\n\n/**\n * @returns {object} account = {\n *   address: {string} \"0x1234abcd...\",\n *   isMetamask: {bool} true\n * }\n */\nexport async function get() {\n  /**\n   * If metamask is locked, user will be promped to enter the password\n   * If the user cancels the unlocking, this promise will never resolve\n   * Once the user unlocks, the user will be prompted to authorize\n   * - If accepts, the promise returns: [\"0x012-userAccount-\"]\n   * - If refuses, the promise rejects:\n   */\n  try {\n    // ethereum.enable has been checked to exist\n    const accounts = await ethereum.enable();\n    return {\n      address: accounts[0],\n      isMetamask: true\n    };\n  } catch (reason) {\n    if (reason === \"User rejected provider access\")\n      throw Error(\"User rejected provider access\");\n    else throw Error(reason);\n  }\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Button from \"@material-ui/core/Button\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport Dialog from \"@material-ui/core/Dialog\";\n// Helpers\nimport * as localAccount from \"./localAccount\";\nimport * as metamaskAccount from \"./metamaskAccount\";\n// Styles\nimport \"./sign-in.scss\";\nimport logo from \"../../logo.png\";\n\nfunction SignInDialog({ open, onAccount, onClose }) {\n  const metamaskStatus = metamaskAccount.status();\n  const localAccountStatus = localAccount.status();\n\n  async function onLocalAccount() {\n    try {\n      onAccount(localAccount.get());\n    } catch (e) {\n      console.log(`Error getting local account: ${e.stack}`);\n    }\n  }\n\n  async function onMetamask() {\n    try {\n      onAccount(metamaskAccount.get());\n    } catch (e) {\n      console.log(`Error getting metamask account: ${e.stack}`);\n    }\n  }\n\n  return (\n    <Dialog id=\"sign-in\" {...{ open, onClose }}>\n      <DialogTitle className=\"title\">Log in</DialogTitle>\n\n      <DialogContent className=\"content\">\n        <img src={logo} alt=\"logo\" className=\"logo\" />\n\n        <Button fullWidth variant=\"contained\" onClick={onLocalAccount}>\n          {localAccountStatus.available ? \"Use\" : \"Create\"} local account\n        </Button>\n\n        <div>OR</div>\n\n        <div>\n          <Button\n            fullWidth\n            variant=\"contained\"\n            color=\"primary\"\n            disabled={!metamaskStatus.available}\n            onClick={onMetamask}\n          >\n            Continue with Metamask\n          </Button>\n          {!metamaskStatus.available && (\n            <div className=\"error\">{metamaskStatus.msg}</div>\n          )}\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}\n\nSignInDialog.propTypes = {\n  open: PropTypes.bool.isRequired,\n  onAccount: PropTypes.func.isRequired,\n  onClose: PropTypes.func.isRequired\n};\n\nexport default SignInDialog;\n","import React from \"react\";\nimport { render, unmountComponentAtNode } from \"react-dom\";\nimport SignInDialog from \"./SignInDialog\";\n\n/**\n * The goal of this module is to provide return a valid address,\n * so the user can interact with the Ethereum blockchain.\n *\n * This action will be shown as a normal Sign In process, for UX\n */\n\nlet root;\n\n/**\n * @returns {object} account = {\n *   address: {string} \"0x1234abcd...\",\n *   privateKey: {string} \"0x9876fedc...\", (only on localAccount)\n *   isMetamask: {bool} true / false\n * }\n */\nexport default function signIn() {\n  if (!root) {\n    // Create the root-modal element\n    root = document.createElement(\"div\");\n    document.body.appendChild(root);\n  }\n  const close = () => unmountComponentAtNode(root);\n  // render (or re-render) and mount the dialog\n  return new Promise((resolve, reject) => {\n    render(\n      <SignInDialog\n        open={true}\n        onAccount={account => {\n          close();\n          resolve(account);\n        }}\n        onClose={() => {\n          close();\n          reject(Error(\"User closed the signIn window\"));\n        }}\n      />,\n      root\n    );\n  });\n}\n\nwindow.signIn = signIn;\n","const faucetUrl = {\n  ropsten: () => \"https://faucet.ropsten.be/\",\n  kovan: () => \"https://faucet.kovan.network/\",\n  rinkeby: () => \"https://faucet.rinkeby.io/\",\n  goerli: address =>\n    address\n      ? `https://goerli-faucet.slock.it/?address=${address}`\n      : \"https://goerli-faucet.slock.it/\"\n};\n\nexport default function getUrlFaucet(network, address) {\n  if (!faucetUrl[network]) throw Error(`Unsupported network: ${network}`);\n  return faucetUrl[network](address);\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Button from \"@material-ui/core/Button\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport Dialog from \"@material-ui/core/Dialog\";\n// Utils\nimport getUrlFaucet from \"utils/getUrlFaucet\";\nimport newTabProps from \"utils/newTabProps\";\n// Styles\nimport \"services/signIn/sign-in.scss\";\n\nfunction DelegateOrFaucetDialog({\n  open,\n  network,\n  address,\n  onClose,\n  onDelegate,\n  onFaucet\n}) {\n  return (\n    <Dialog id=\"sign-in\" {...{ open, onClose }}>\n      <DialogTitle className=\"title\">Not enough funds</DialogTitle>\n\n      <DialogContent style={{ maxWidth: \"18.5rem\", fontSize: \"0.875rem\" }}>\n        <strong>Delegate</strong> to a relay that will pay the transaction\n        costs, or\n        <br />\n        <strong>Get funds</strong> for free from a public faucet\n      </DialogContent>\n\n      <DialogContent className=\"content\">\n        <Button fullWidth variant=\"contained\" onClick={onDelegate}>\n          Delegate\n        </Button>\n\n        <div>OR</div>\n\n        <a\n          href={getUrlFaucet(network, address)}\n          {...newTabProps}\n          style={{ width: \"100%\" }}\n        >\n          <Button\n            fullWidth\n            variant=\"contained\"\n            color=\"primary\"\n            onClick={onFaucet}\n          >\n            Get funds\n          </Button>\n        </a>\n      </DialogContent>\n    </Dialog>\n  );\n}\n\nDelegateOrFaucetDialog.propTypes = {\n  open: PropTypes.bool.isRequired,\n  network: PropTypes.string.isRequired,\n  address: PropTypes.string.isRequired,\n  onDelegate: PropTypes.func.isRequired,\n  onFaucet: PropTypes.func.isRequired,\n  onClose: PropTypes.func.isRequired\n};\n\nexport default DelegateOrFaucetDialog;\n","import React from \"react\";\nimport { render, unmountComponentAtNode } from \"react-dom\";\nimport DelegateOrFaucetDialog from \"./DelegateOrFaucetDialog\";\n\nlet root;\nexport default function delegateOrFaucetDialog({ network, address }) {\n  if (!root) {\n    // Create the root-modal element\n    root = document.createElement(\"div\");\n    document.body.appendChild(root);\n  }\n  const close = () => unmountComponentAtNode(root);\n  // render (or re-render) and mount the dialog\n  return new Promise((resolve, reject) => {\n    render(\n      <DelegateOrFaucetDialog\n        open={true}\n        {...{ network, address }}\n        onDelegate={() => {\n          close();\n          resolve(true);\n        }}\n        onFaucet={() => {\n          close();\n          reject(Error(\"Awaiting user to get funds at the faucet\"));\n        }}\n        onClose={() => {\n          close();\n          reject(Error(\"User closed the dialog window\"));\n        }}\n      />,\n      root\n    );\n  });\n}\n","/**\n * MUST NOT change the msg params definition\n * The Smart Contract has this values hardcoded\n */\n\nexport default function getMsgParams({ surveyId, answersBytes }) {\n  return [\n    {\n      type: \"bytes32\", // Any valid solidity type\n      name: \"Survey ID\", // Any string label you want\n      value: surveyId // The value to sign\n    },\n    {\n      type: \"bytes32\",\n      name: \"Answers\",\n      value: answersBytes\n    }\n  ];\n}\n","import ethSigUtils from \"./ethSigUtils\";\nimport { toBuffer } from \"ethereumjs-util\";\nimport getMsgParams from \"./getMsgParams\";\n\n/**\n * Sign the answers using a local account\n *\n * @param {string} privateKey \"0x348ce564d427a3311b6536bbcff9390d69395b06ed6c486954e971d960fe8709\"\n * @param {string} surveyId \"0x1da44b586eb0729ff70a73c326926f6ed5a25f5b056e7f47fbc6e58d86871655\"\n * @param {string} answers  \"0x3020000000000000000000000000000000000000000000000000000000000000\"\n */\nexport default async function signAnswers({\n  privateKey,\n  surveyId,\n  answersBytes\n}) {\n  /**\n   * =================================\n   * This code below accurately simulates a metamask signature\n   * using the method `signTypedData_v1`\n   */\n\n  const sig = ethSigUtils.signTypedData(toBuffer(privateKey), {\n    data: getMsgParams({ surveyId, answersBytes })\n  });\n  return sig;\n}\n","import getMsgParams from \"./getMsgParams\";\n\n/**\n * Sign the answers using a local account\n *\n * @param {string} privateKey \"0x348ce564d427a3311b6536bbcff9390d69395b06ed6c486954e971d960fe8709\"\n * @param {string} surveyId \"0x1da44b586eb0729ff70a73c326926f6ed5a25f5b056e7f47fbc6e58d86871655\"\n * @param {string} answers  \"0x3020000000000000000000000000000000000000000000000000000000000000\"\n */\n\nexport default function signAnswersWithMetamask({\n  address,\n  surveyId,\n  answersBytes\n}) {\n  return new Promise((resolve, reject) => {\n    const msgParams = getMsgParams({\n      surveyId,\n      answersBytes\n    });\n    const from = address;\n    window.ethereum.sendAsync(\n      {\n        method: \"eth_signTypedData\",\n        params: [msgParams, from],\n        from: from\n      },\n      function(err, result) {\n        if (err) reject(Error(err.message || err));\n        else if (result.error) reject(Error(result.error.message));\n        else resolve(result.result);\n      }\n    );\n  });\n}\n","import recoverFromSignedAnswers from \"./recoverFromSignedAnswers\";\n\nexport default function validateSignature({\n  sig,\n  surveyId,\n  answersBytes,\n  address\n}) {\n  const recoveredAddress = recoverFromSignedAnswers({\n    sig,\n    surveyId,\n    answersBytes\n  });\n\n  if (recoveredAddress.toLowerCase() !== address.toLowerCase())\n    throw Error(\"Signature is not correct\");\n}\n","import { recoverTypedSignature } from \"./ethSigUtils\";\nimport { toChecksumAddress } from \"ethereumjs-util\";\nimport getMsgParams from \"./getMsgParams\";\n\n/**\n * Use to validate metamask signatures,\n * to ensure the method is the same as the one in the Smart Contract\n *\n * @param {string} sig \"0xa53832b8892fc642669f5bc3dbefa66814160ade12f5187db131031f8013652b7cef7bc5752cf90ef3abf8ed898df2b6a65c3735c3693b0cf379e5738f3e1a301b\"\n * @param {string} msgParams = [\n *   { type: \"bytes32\", name: \"Survey ID\", value: surveyId },\n *   { type: \"bytes32\", name: \"Answers\", value: answers }\n * ]\n */\nexport default function recoverFromSignedAnswers({\n  sig,\n  surveyId,\n  answersBytes\n}) {\n  const recoveredAddress = recoverTypedSignature({\n    data: getMsgParams({ surveyId, answersBytes }),\n    sig\n  });\n  return toChecksumAddress(recoveredAddress);\n}\n","const baseUrl = \"http://37.44.215.124:3000\";\n\nexport default function requestRelaySubmit({\n  sig,\n  userAddress,\n  contractAddress,\n  surveyId,\n  answersBytes\n}) {\n  const relayParams = {\n    sig,\n    userAddress,\n    contractAddress,\n    surveyId,\n    answersBytes\n  };\n  const url = getRelayUrl(baseUrl, relayParams);\n  console.log(`Submitting to relay: ${url}`);\n  // The submit endPoint response the txHash as plain text\n  return fetch(url)\n    .then(r => r.text())\n    .then(txHash => {\n      console.log(`Relay response: ${txHash}`);\n      return txHash;\n    });\n}\n\n// Utils\n\nexport function getRelayUrl(baseUrl, relayParams) {\n  const relayUrl = new URL(baseUrl);\n  relayUrl.pathname = \"/submit/\";\n  Object.entries(relayParams).forEach(([key, val]) => {\n    relayUrl.searchParams.set(key, val);\n  });\n  return relayUrl.toString();\n}\n","import signIn from \"services/signIn\";\nimport delegateOrFaucetDialog from \"./delegateOrFaucetDialog\";\nimport { getBalance, getSubmitContract } from \"services/ethereumMethods\";\nimport signAnswers from \"./signAnswers\";\nimport signAnswersWithMetamask from \"./signAnswersWithMetamask\";\nimport validateSignature from \"./validateSignature\";\nimport requestRelaySubmit from \"./requestRelaySubmit\";\n// Utils\nimport { encodeAnswers } from \"utils/answersCoder\";\nimport hashToBytes32 from \"utils/hashToBytes32\";\n\n/**\n * The goal of this module is to submit user's answers\n * It encapsulates all the logic of:\n * - Getting the user account\n * - Deciding the submission method\n * - Handling the transaction\n */\n\nexport default async function submitAnswers({ answers, submit, hash }) {\n  const { network } = submit;\n  console.log(\"Submitting answers\", { answers, submit });\n\n  /**\n   * @param {object} account = {\n   *   address: {string} \"0x1234abcd...\",\n   *   privateKey: {string} \"0x9876fedc...\", (only on localAccount)\n   *   isMetamask: {bool} true / false\n   * }\n   */\n  const account = await signIn();\n  console.log(\"Submitting answers: Got account\", { account });\n\n  let useDelegateSubmit;\n  if (account.isMetamask) {\n    const userBalance = await getBalance(account.address, network); // returns {string}\n    if (userBalance === \"0\") {\n      //\n      /**\n       * Ask user to get funds, or use delegate\n       * - If chooses to get funds, an error will be thrown to stop the process\n       * - If chooses to delegate, the function will return true\n       */\n      useDelegateSubmit = await delegateOrFaucetDialog({\n        network,\n        address: account.address\n      });\n    } else {\n      useDelegateSubmit = false;\n    }\n  } else {\n    useDelegateSubmit = true;\n  }\n\n  //   // Verify that the metamask network is correct\n  //   const metamaskNegetSubmitContracttId = ethereum.networkVersion; // > \"5\"\n  //   const web3NetId = await web3.eth.net.getId().then(String);\n  //   if (metamaskNetId && web3NetId && metamaskNetId !== web3NetId) {\n  //     console.log({ metamaskNetId, web3NetId });\n  //     throw Error(`Please change metamask network to ${network}`);\n  //   }\n\n  // Encode parameters\n  const answersBytes = encodeAnswers(answers);\n  const surveyId = hashToBytes32(hash);\n\n  let txHash;\n  if (useDelegateSubmit) {\n    txHash = await delegateSubmit({ submit, account, surveyId, answersBytes });\n  } else {\n    // Directly submit to contract\n    txHash = await directSubmit({\n      submit,\n      network,\n      account,\n      surveyId,\n      answersBytes\n    });\n  }\n  console.log(\"submitAnswers result\", txHash);\n  return txHash;\n}\n\nasync function delegateSubmit({ submit, account, surveyId, answersBytes }) {\n  // Get the signature\n  const sig = account.isMetamask\n    ? await signAnswersWithMetamask({\n        address: account.address,\n        surveyId,\n        answersBytes\n      })\n    : await signAnswers({\n        privateKey: account.privateKey,\n        surveyId,\n        answersBytes\n      });\n\n  // Will throw if the signature is not correct\n  validateSignature({\n    sig,\n    address: account.address,\n    surveyId,\n    answersBytes\n  });\n\n  // Post data to relay\n  const relayParams = {\n    sig,\n    userAddress: account.address,\n    contractAddress: submit.address,\n    surveyId,\n    answersBytes\n  };\n  const txHash = await requestRelaySubmit(relayParams);\n  console.log(`Successfully submitted to relay`, txHash);\n  return txHash;\n}\n\nfunction directSubmit({ submit, network, account, surveyId, answersBytes }) {\n  console.log(\"Attempting directSubmit\");\n  const submitContract = getSubmitContract({\n    address: submit.address,\n    network,\n    withMetamask: account.isMetamask\n  });\n  return new Promise((resolve, reject) => {\n    submitContract.methods\n      .submit(surveyId, answersBytes)\n      .send({ from: account.address }, (error, transactionHash) => {\n        console.log(`Direct submit response`, error, transactionHash);\n        if (error) reject(Error(error.message || error));\n        else resolve(transactionHash);\n      });\n  });\n}\n","import React, { useState } from \"react\";\nimport submitAnswers from \"services/submitAnswers\";\n// Components\nimport FormDisplay from \"./FormDisplay\";\nimport Button from \"@material-ui/core/Button\";\n// Utils\nimport { areAnswersFulfilled } from \"utils/utils\";\nimport { getContractUrl, getTxUrl } from \"utils/getUrlBlockExplorer\";\n\n// ##### DEV\nimport \"services/signIn\";\n\nconst faucetUrl = {\n  ropsten: \"https://faucet.ropsten.be/\",\n  kovan: \"https://faucet.kovan.network/\",\n  rinkeby: \"https://faucet.rinkeby.io/\",\n  goerli: \"https://goerli-faucet.slock.it/\"\n};\n\nfunction Answer({ form, hash }) {\n  const { title, description, questions, submit } = form;\n\n  const [answers, setAnswers] = useState({});\n  const [txHash, setTxHash] = useState(\"\");\n  const [submitting, setSubmitting] = useState(false);\n  const [error, setError] = useState(\"\");\n\n  async function onSubmit() {\n    try {\n      setSubmitting(true);\n      const submissionHash = await submitAnswers({\n        answers,\n        submit,\n        hash\n      });\n      setTxHash(submissionHash);\n    } catch (e) {\n      setError(e.message);\n      console.error(`Èrror onSubmit answers: ${e.stack}`);\n    } finally {\n      setSubmitting(false);\n    }\n  }\n\n  const answersFulfilled = areAnswersFulfilled(answers, questions);\n\n  if (txHash)\n    return (\n      <div>\n        <h5>Success!</h5>\n        <p>\n          Answers submitted to{\" \"}\n          <a href={getTxUrl(submit.network, txHash)}>{submit.network}</a>\n        </p>\n      </div>\n    );\n\n  return (\n    <>\n      <FormDisplay\n        {...{ title, description, questions, answers, setAnswers }}\n      />\n\n      <div className=\"submit\">\n        {submitting ? (\n          <h6>Submitting...</h6>\n        ) : (\n          <div>\n            <Button\n              variant=\"contained\"\n              color=\"primary\"\n              onClick={onSubmit}\n              disabled={!answersFulfilled}\n            >\n              Submit\n            </Button>\n\n            <p style={{ opacity: 0.5, fontSize: \"75%\" }}>\n              Submits to {submit.to} at {submit.network}{\" \"}\n              <a href={getContractUrl(submit.network, submit.address)}>\n                {submit.address}\n              </a>\n            </p>\n            <p style={{ opacity: 0.5, fontSize: \"75%\" }}>\n              Need funds? Go to the{\" \"}\n              <a href={faucetUrl[submit.network]}>{submit.network} faucet</a>.\n              You need ~ 0.000025475 Ether to submit.\n            </p>\n\n            {error && <p style={{ color: \"red\" }}>Error: {error}</p>}\n          </div>\n        )}\n      </div>\n    </>\n  );\n}\n\nexport default Answer;\n","export function getUnique(arr, comp) {\n  const unique = arr\n    .map(e => e[comp])\n    // store the keys of the unique objects\n    .map((e, i, final) => final.indexOf(e) === i && i)\n    // eliminate the dead keys & store unique objects\n    .filter(e => arr[e])\n    .map(e => arr[e]);\n  return unique;\n}\n\nexport function areAnswersFulfilled(answers, questions) {\n  if (!questions || !answers) return false;\n  for (let i = 0; i < questions.length; i++) {\n    if (!(i in answers)) return false;\n  }\n  return true;\n}\n\nexport function endWithQuestionMark(s) {\n  if (!s) return s;\n  if (s.endsWith(\"?\")) return s;\n  else return s + \"?\";\n}\n","import React from \"react\";\nimport Remove from \"@material-ui/icons/Remove\";\n\n// web3.eth.getTransactionCount\n\nfunction getQuestionResults(submissions) {\n  const totalResponses = submissions.length;\n\n  // Aggregate submissions counting answers per question\n  const questionsResults = [];\n  submissions.forEach(submission => {\n    submission.answers.forEach((answer, i) => {\n      if (!questionsResults[i]) questionsResults[i] = [];\n      const j = answer.answerIndex;\n      questionsResults[i][j] = questionsResults[i][j]\n        ? questionsResults[i][j] + 1\n        : 1;\n    });\n  });\n\n  // Convert the answer counts to a percent\n  return questionsResults.map(question =>\n    question.map(count => Math.round((100 * count) / totalResponses))\n  );\n}\n\nfunction getUniqueAddresses(submissions) {\n  return Object.keys(\n    submissions.reduce((users, { user }) => ({ ...users, [user]: true }), {})\n  );\n}\n\nfunction Results({ form, submissions }) {\n  const { title, questions } = form;\n\n  if (!form || !submissions) return null;\n\n  const uniqueAddresses = getUniqueAddresses(submissions);\n  const questionsResultsPercent = getQuestionResults(submissions);\n  const totalResponses = submissions.length;\n  const uniqueResponses = uniqueAddresses.length;\n\n  return (\n    <>\n      <div className=\"header\">\n        <div className=\"title\">{title}</div>\n      </div>\n\n      <div className=\"stats\">\n        <div className=\"name\">Total responses</div>\n        <div className=\"name\">Unique responses</div>\n        <div className=\"stat\">{totalResponses}</div>\n        <div className=\"stat\">{uniqueResponses}</div>\n      </div>\n\n      <details className=\"address-list\">\n        <summary>Unique addresses list</summary>\n        {uniqueAddresses.map(address => (\n          <div key={address}>{address}</div>\n        ))}\n      </details>\n\n      <h3>Results</h3>\n      {questions.map(({ text, options }, i) => {\n        return (\n          <div key={i} className=\"form-question\">\n            <div className=\"text\">{text}</div>\n            <div className=\"answers\">\n              {options.map((option, j) => {\n                const percent =\n                  ((questionsResultsPercent[i] || [])[j] || 0) + \"%\";\n                return (\n                  <React.Fragment key={j}>\n                    <div className=\"option\">\n                      <Remove />\n                      <span>{option}</span>\n                    </div>\n                    <div className=\"progress\">\n                      <div\n                        className=\"progress-bar\"\n                        role=\"progressbar\"\n                        style={{ width: percent }}\n                      >\n                        {percent}\n                      </div>\n                    </div>\n                  </React.Fragment>\n                );\n              })}\n            </div>\n          </div>\n        );\n      })}\n    </>\n  );\n}\n\nexport default Results;\n","import React, { useState, useEffect } from \"react\";\nimport { storeUserForm } from \"services/userForms\";\nimport fetchForm from \"services/fetchForm\";\nimport fetchSubmissions from \"services/fetchSubmissions\";\n// Components\nimport Answer from \"./Answer\";\nimport Results from \"./Results\";\nimport Loading from \"components/Loading\";\nimport Section from \"components/Section\";\nimport Link from \"components/Link\";\nimport Button from \"@material-ui/core/Button\";\n\n// Styles\nimport \"./form.scss\";\n\nlet cachedSubmissionsHash;\nfunction Form({ match }) {\n  const { hash, showResults } = match.params;\n\n  const [form, setForm] = useState(null);\n  const [submissions, setSubmissions] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(\"\");\n\n  useEffect(() => {\n    async function fetchFormEffect() {\n      try {\n        setLoading(true);\n        const _form = await fetchForm(hash);\n        setForm(_form);\n        console.log(`Fetched form for ${hash}`, _form);\n        storeUserForm(hash, _form);\n      } catch (e) {\n        setError(e.message);\n        console.error(`Èrror fetching form: ${e.stack}`);\n      } finally {\n        setLoading(false);\n      }\n    }\n    if (hash) fetchFormEffect();\n  }, [hash]);\n\n  useEffect(() => {\n    async function fetchSubmissionsEffect() {\n      try {\n        setLoading(true);\n        const _submissions = await fetchSubmissions({\n          hash,\n          network: form.submit.network,\n          address: form.submit.address,\n          questions: form.questions\n        });\n        setSubmissions(_submissions);\n        console.log(`Fetched submissions for ${hash}`, _submissions);\n        cachedSubmissionsHash = hash;\n      } catch (e) {\n        setError(e.message);\n        console.error(`Èrror fetching submissions: ${e.stack}`);\n      } finally {\n        setLoading(false);\n      }\n    }\n    if (form && showResults && cachedSubmissionsHash !== hash)\n      fetchSubmissionsEffect();\n  }, [showResults, form]);\n\n  return (\n    <div className=\"site-width main-section\">\n      <Section id=\"form\">\n        {loading ? (\n          <Loading />\n        ) : !form ? (\n          <h5>No form</h5>\n        ) : showResults ? (\n          <Results {...{ form, submissions }} />\n        ) : (\n          <Answer {...{ form, hash }} />\n        )}\n\n        {form &&\n          (showResults ? (\n            <Link to={`/${hash}`}>\n              <Button>Back to form</Button>\n            </Link>\n          ) : (\n            <Link to={`/${hash}/results`}>\n              <Button>See Results</Button>\n            </Link>\n          ))}\n\n        {error && <h5>Error: {error}</h5>}\n      </Section>\n    </div>\n  );\n}\n\nexport default Form;\n\n// Utilities\n","import React from \"react\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport \"./loading.scss\";\n\nconst Loading = () => (\n  <div className=\"loading\">\n    <div className=\"text\">Loading...</div>\n    <CircularProgress />\n  </div>\n);\n\nexport default Loading;\n","import React, { Component } from \"react\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport { Route, Switch } from \"react-router-dom\";\nimport Nav from \"components/Nav\";\n// Pages\nimport Home from \"./pages/home/Home\";\nimport Create from \"./pages/create\";\nimport Form from \"./pages/form/Form\";\n\nclass App extends Component {\n  constructor() {\n    super();\n    this.state = { title: null, questions: null };\n  }\n\n  render() {\n    return (\n      <>\n        <CssBaseline />\n        <Nav />\n        <Switch>\n          <Route path={\"/\"} exact={true} component={Home} />\n          <Route path={\"/create/:publish?\"} component={Create} />\n          <Route path={\"/:hash/:showResults?\"} component={Form} />\n          <Route render={() => <h1>404 Route not found</h1>} />\n        </Switch>\n      </>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\"\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\"\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { HashRouter as Router } from \"react-router-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(\n  <Router>\n    <App />\n  </Router>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = \"data:image/png;base64,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\"","const ethUtil = require(\"ethereumjs-util\");\nconst ethAbi = require(\"ethereumjs-abi\");\n\nmodule.exports = {\n  concatSig: function(v, r, s) {\n    const rSig = ethUtil.fromSigned(r);\n    const sSig = ethUtil.fromSigned(s);\n    const vSig = ethUtil.bufferToInt(v);\n    const rStr = padWithZeroes(ethUtil.toUnsigned(rSig).toString(\"hex\"), 64);\n    const sStr = padWithZeroes(ethUtil.toUnsigned(sSig).toString(\"hex\"), 64);\n    const vStr = ethUtil.stripHexPrefix(ethUtil.intToHex(vSig));\n    return ethUtil.addHexPrefix(rStr.concat(sStr, vStr)).toString(\"hex\");\n  },\n\n  normalize: function(input) {\n    if (!input) return;\n\n    if (typeof input === \"number\") {\n      const buffer = ethUtil.toBuffer(input);\n      input = ethUtil.bufferToHex(buffer);\n    }\n\n    if (typeof input !== \"string\") {\n      var msg =\n        \"eth-sig-util.normalize() requires hex string or integer input.\";\n      msg += \" received \" + typeof input + \": \" + input;\n      throw new Error(msg);\n    }\n\n    return ethUtil.addHexPrefix(input.toLowerCase());\n  },\n\n  personalSign: function(privateKey, msgParams) {\n    var message = ethUtil.toBuffer(msgParams.data);\n    var msgHash = ethUtil.hashPersonalMessage(message);\n    var sig = ethUtil.ecsign(msgHash, privateKey);\n    var serialized = ethUtil.bufferToHex(this.concatSig(sig.v, sig.r, sig.s));\n    return serialized;\n  },\n\n  recoverPersonalSignature: function(msgParams) {\n    const publicKey = getPublicKeyFor(msgParams);\n    const sender = ethUtil.publicToAddress(publicKey);\n    const senderHex = ethUtil.bufferToHex(sender);\n    return senderHex;\n  },\n\n  extractPublicKey: function(msgParams) {\n    const publicKey = getPublicKeyFor(msgParams);\n    return \"0x\" + publicKey.toString(\"hex\");\n  },\n\n  typedSignatureHash: function(typedData) {\n    const hashBuffer = typedSignatureHash(typedData);\n    return ethUtil.bufferToHex(hashBuffer);\n  },\n\n  signTypedData: function(privateKey, msgParams) {\n    const msgHash = typedSignatureHash(msgParams.data);\n    const sig = ethUtil.ecsign(msgHash, privateKey);\n    return ethUtil.bufferToHex(this.concatSig(sig.v, sig.r, sig.s));\n  },\n\n  recoverTypedSignature: function(msgParams) {\n    const msgHash = typedSignatureHash(msgParams.data);\n    const publicKey = recoverPublicKey(msgHash, msgParams.sig);\n    const sender = ethUtil.publicToAddress(publicKey);\n    return ethUtil.bufferToHex(sender);\n  }\n};\n\n/**\n * @param typedData - Array of data along with types, as per EIP712.\n * @returns Buffer\n */\nfunction typedSignatureHash(typedData) {\n  const error = new Error(\"Expect argument to be non-empty array\");\n  if (typeof typedData !== \"object\" || !typedData.length) throw error;\n\n  const data = typedData.map(function(e) {\n    return e.type === \"bytes\" ? ethUtil.toBuffer(e.value) : e.value;\n  });\n  const types = typedData.map(function(e) {\n    return e.type;\n  });\n  const schema = typedData.map(function(e) {\n    if (!e.name) throw error;\n    return e.type + \" \" + e.name;\n  });\n\n  return ethAbi.soliditySHA3(\n    [\"bytes32\", \"bytes32\"],\n    [\n      ethAbi.soliditySHA3(new Array(typedData.length).fill(\"string\"), schema),\n      ethAbi.soliditySHA3(types, data)\n    ]\n  );\n}\n\nfunction recoverPublicKey(hash, sig) {\n  const signature = ethUtil.toBuffer(sig);\n  const sigParams = ethUtil.fromRpcSig(signature);\n  return ethUtil.ecrecover(hash, sigParams.v, sigParams.r, sigParams.s);\n}\n\nfunction getPublicKeyFor(msgParams) {\n  const message = ethUtil.toBuffer(msgParams.data);\n  const msgHash = ethUtil.hashPersonalMessage(message);\n  return recoverPublicKey(msgHash, msgParams.sig);\n}\n\nfunction padWithZeroes(number, length) {\n  var myString = \"\" + number;\n  while (myString.length < length) {\n    myString = \"0\" + myString;\n  }\n  return myString;\n}\n"],"sourceRoot":""}