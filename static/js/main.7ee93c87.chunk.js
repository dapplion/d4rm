(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{130:function(e){e.exports=[{constant:!1,inputs:[{name:"_answers",type:"bytes"}],name:"submit",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{inputs:[],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,name:"user",type:"address"},{indexed:!1,name:"answers",type:"bytes"}],name:"Submission",type:"event"}]},319:function(e,t){},346:function(e,t,n){},348:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA38AAAGHCAMAAAA3NxvgAAAAY1BMVEVHcEwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/fU//fU8AAAAAAAAAAAD/fU8AAAAAAAAAAAAAAAARCAUAAAAAAAAAAAD/fU//fU8AAAD/fU8AAAD/fU8AAAAAAAD/fU/1LA/oAAAAH3RSTlMA4hLBIXDxUKCxD92P6yyHX9Ix+gM8CX9Eu0eWmCKoNpgT0gAAEO9JREFUeNrs3duSm0gWQFGuQrglDQhAPYxGp///K6fCHodd5RJ5TxLV3tGvHbZJlgDEQVlGREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREQUsv/8o+5fbCYi/BHhj4jwR4Q/IsIfEf6ICH9E+CMi/BHhj4jwR4Q/IsIfEf6I8Ic/IvwR4Q9/RPgjwh8R4Y8If0SEPyL8ERH+iPBHRPgjwh8R4Y8If0SEPyL8EeEPf0T4I8If/ojwR5R2f9n1XtO3/6r7xrYm+tg/dnE0I8IfEf6ICH9E+CMi/BHhj4jwR4Q/IsIfEf6I8Ic/IvwR4Q9/RPgjwh/+iPBHhD/8EeGPCH9EhD8i/BER/ojwR0RR/X37yyVez0v4c/L3j0v4I/zhjwh/WVb7qeu6ZroUo/8Nt/anViFWqln5Axfbv6nZtgy0KX90TYnF9av7E68NeXmvp8Lnhlv745oQK9Wu/IFH27+p1aY81kvh/9+XF+nw6474C1B+7C7487MpH7XnY4SUcyr8pgF/ocrvzYw/Tx9njUcyIo9E+FVnwV/ADg8P+w3+RESG1htBEbklwW/uBX8StvPpgj9Pn2anqy9/Q5OCv4fgL/RO81a54M/XpmxGL/7kcNme303wF2OnEem7EX+eLgXr2Yc/2f4maCP4i7TTiOT2AvH34WuJbvTgT8pxW37XA/7i+RPpF/z5+jBrPPiT+5b6xiIX/MXcaUTaCn++rgMv7v6k3vLWZyn4i7zTyFCP+PO0KW+zs79h2s7fUfAXfacR6a/487UpJ1d/cq624lcL/rbYaWwOgfh70m109Cf9RjdBF8HfRjuNlAX+fG1K5wvqdpOboJcD/jbbaeQ84c/XEzGLoz85bcCv6AV/2+00MtT483YO6npDq4v/1UMp+Nt0p5H7iD9PHWc3f0P0adyT4G/jnUbaGX9bXU9/+GvGvgnaCf4232lM9hr8Kb6IcLuhNfRRp3GnAX8J7DQGew3+VI+jVS7+4k7jVmfBXwo7jT5A/CmfyK6c/EWcxp17wV8a/rQB4k99BCyc/Em0adxW8JfKTqP7GiD8eb4G/OR7xEjTuDfBXzr+NJ++wJ+/z7Jnf80407iN4C8lf3ojaPjT6eHkL8orCa8D/tLypzWChj/PT8LYfxQ69XPidiN//7br75f2pzOChj+9Gid/wadx51I29WfZtzGwv4Ov7B7Grl7I37ab8lA5+RuWsDvyUXbpLwt9/PPWWFyb+tib3jgYX8efx015sdiUug+yuPq1qhb8Bf79sfH7f0Vzz71et3xBfz+vmJaT0aY8OfkLOo27CP7i/f7fdNc/hVI+gP91/X2/aXg66wNcnPwFnMa9HPAX9fc35673ddr0tf0Zbcp8dvIXbBq3yAV/sX//tun9nIF+dX9Zli2lzzPQlf+/C3NhUgr+4v/+9NjpXb0MF/wpP8w0LwQnN39hXkl4F/xt8fvv43zS8lfiT30Wehp0NmU/OvkLMY07doK/TfxlWTZpfW43+NO4E6N1Pt+5+RP/07jTgL/N/GXFQ2eAbcafxiHw6OcWjLcHSbWq1u/f4i90teNzoPj7tSkH57tZSn+ep3FnxVEbf8GvApvB6VMbf7/dCFV/r3ouHP153ahjK/jb1l+WTQeXAyD+fr8IPLsfAJUPknp8JeFN8Le5Pw2A+Yg/rS5KgOfZ0Z/HadxO8JeAP8U9sPX7dvh7D/DgcjGt5c/bNO51wF8S/j599cD7L67w5+mzbMhHV39+/pljkQv+0vCnvgt6xZ+vk7rF2Z+Xady5F/yl4i872i4E/j6meqqodfcnHqZxH4K/dPzNipORw4w/TweWoXD35/5KwpvgLyF/yovxDn+6VYPL2aPmWJjjTdBG8JeUP9VpU4s/X1fTpQd/jtO4lwP+EvOnOAN9dta0G39jvJ/SGxVnoJUHf07TuIXuizPwF6/G6gR0R+8/m6JtysnhBFT7dRad/eeD7sAw/mJW2jx5vx9/EhFga38Cqv9qHut/zl3wl6C/9U/tw7h3fxEBXtflzD78WU/j1oK/FP0pDoDT7v1FBNhazzAYvNHQbhp3GfCXpr/G4sn9XfmLB3Cyvndi4E/1Vf6nVQZvTMRf1MbcfLH35S8ewN72AtDEn8U0bmH03m78Re1mfgG4M3/RANa2F4BG/ow3sXLiFn8bVq0uxuUV/MUCWAzm19IW/gbDbzVP8ur+xr9dGrf9y/fGnHbnLxbANsALBZyncTt5eX+77mZ8sbE/f5EArp6A3r35M5rGnQb8Jd3V+AbMDv3FAVhZ3oAx9WdgxOjWJ/62OHleey63fxV/cQCu3UzOPfrTnsade8Ff4q19BT+8jL8oAFcHXGeP/nSncR+Cv9RbvT9WvIy/GABr43vJtv70pnFvgr/ka0xfArNTf15fo/l5i90hy0KJ1k3QRvCX/vXf1XSn2as/OV8Cb8vKbnjIhslQKr+3uhzwt4MK051mt/6CAxwHq3smYpVqGrfIBX97yHSn2a+/4ABzqwc37fwppnHnUvC3i/Kv4y80wN7qeGXpb30a9y7420e94Yf2nv0FBljG9Lc6jVsL/vCXnr+wAFurB9BsqaxM4y4D/vaS6Yf2vv0FBWj3N7X293QatzoI/vCXpL+QACMf/57d1Cl6wR/+EvUXEGDc679nN0ENJ27xh7+o/sIB7KP7+2wa9yT4w1/C/oIBjPr937MH0TrBH/6S9hcI4Gg3M+Tk5Y+boNOAP/wl7i8MwIjPfz7dBOYTt/jDX3R/QQCuzj9Mofy9O7LOveAPf+n7CwHw5n/+T+spzt+2us7E7bnHH/629hcA4Op9f7v59+aoAerXNK7OxO0wtfjD3+b+/ANcu/SyfP9LozXH8PMmaKN3uoo//CXgzzfAy+qJpKU/vTm+H9O4V53Hzu4Z/vCXhD/PAEO8/7PRV6UvFX8rNSsV+PPqzy/A0nJaVrVBNc8q9c9U8ZfZrwb+PPrzCXD9pzSuDiuud1dF/04N/vCXiD+PAIP8/lGj/a2C1mMvTYY//KXkzxvAMcjv//3YoM7fqr9/BhV/+EvGny+Aqw+/WP/+7f83qOtTZT96ZPjDX2r+PAFcv/uxOK6441PVP47BM/7wl54/LwDXf/597fJPb4N2zvx+TSrhD38p+fMBcP3wV7qv+MmR32+TuvjDX1L+3AEu+iMKlhvU6a0S77+AxB/+0vLnClB1g7LysOKF003QW4Y//CXrzxGg4hvy0suKO7xVUNoRf/hL2J8TwOvgcPqpv0EXa37vX1KBP/wl588BoOrscyg8rbjtW+U/vKkef/hLz589QNWTlw9vK273qyoff6kFf/hL0J8tQOVRafK24na/KtZl+MNf+v7sACrHg3qPK27zq5qnDH/424M/G4DqJ8M6nytu/qvSf/5SNf7wl6Y/c4CT0sN59rrijdk/aPjzBdn4w1+q/kwBqvkpvnww36A3o3/P4ZLhD3+78WcGsFGPJSgPf8Yb9GHyz1ky/OFvR/5MAOocimrvK24yjVtn+MPfrvxpAyx0nojOZ/8rrj+Ne8zwh7+d+dMEuGh9FdCEWHHdadxyxh/+dudPB2Ch9yhKGWbF9aZx8yLDH/72508JcKz1TgGHS6AV15nGHa4Z/vC3R3/rAMdO9ymUW6gV15nGbTL84W+f/lYAFnUumtdf/RxsxdXTuLcMf/jbq78nAMflaPAmsmvAFVdN47YZ/r6cv75t28fxeDy9dbvd6re6rmuappneul6vVVUVb43p+/sEYNUdjd7DeQu64stge+jF36v6M3kw8XA45G/1fV++tQK33MbfL4BzcVm6W2s6elCOYVd8be7pXGX4w1/w+oD+XPlWoVf8+Vcgw5ThD39f2d8wBV/x8enSdRn+8Pel/dURVvzZNO4pwx/+vrS/e5QV/3waV3XhiT/8eapM1F87xlnxz6Zxe9XPJOMPf6/tr5xjrfifI1AH5TNv+MPfS/tTHoE8rvgf07hLhj/8fWV/ZvwcV/zjNK7GfR/84c/XdVaC/gz5ua74+5ugOn7wh7/X9VcWUVd8HH//9QmtC0/84e9l/bVz9BX/NY2ba9nHH/489UjN32ncYMV/TuMe9AYu8Ic/Tx3T8jd0m6z4z2lczf0Dfyn5WxvkvOHPpPy60Yr/uAmqOe+EP/y9pL+22GzFq7PII8PfDv2tjZTW+NM/96w3XPFxGvoZf3v0N+DPy9cOl21XvKsy/P2vvbvbTVuJAjA6OAaKBAjwDxJC4f3f8kSn7V1jIMB4zF7rvqKZmS/bGAIT7K++9wH19w+LeTud37j6K2g3uqEH7PR328sg1YR2XH8F7UY7+FHKW/3dcunZpVZ/+vuRwU9S7vV31X45sR3XX0m7MfTywybp79X16S90f/3Q7c+9/oZfclh1E/yNq7+CduN097sr9ff33S7Heoo7rr+SdmPw6d9cf99emp+7ie64/krajcEPdT7p75sLg66d7I7rr6DdGHz17/LP66u63h4Oh67rTsvlcvdlPp8fv6zX6/OvX79WXz4+PvZfZrPZZrFYvGF/szrpT3+PG/wW19nQv7xrAPRVVdWvCHes689nBqi/sP31i7tvvzzs7nBf8v0r6903ZtkD1F/Y/uaXu2+/5PeS7x/79otl6+wB6i9qf+3wWdsG7C+lOneA+ova3+7y46d/79tf9gmov6D99cMH7Ryzv+wTUH9B+zsOH69l1P4yT0D9xeyvHr7Bv+ij9pd5AuovZn+rB15ae/P+sk5A/YXsb3flaJ0C95d1AuovYn9Xrj4vszZ0fxknoP4C9tfvr5yrYwrdX8YJqL+A/X1eO1Z19P6yTUD9xetvffUvbFL0/rJNQP2F629+9Ux1+ss1AfUXrb/r+X0k/eWagPoL1t/x+oE66S/bBNRfqP7a82VS42/M/rJMQP1F6m/wz1kLfPY3cn8ZJqD+AvXX3XKcVkl/+Sag/sL01x+bG05Ss9Vfxgmovyj9dfubDtI66S/jBNRfjP7qzxuPUaW/nBNQfxH6q8/NbYeomL+7Laa/F09A/b1/f93nrfUVdvOljP5eOgH19+b9bY+zy802lf7yTkD9vXF/9e58R3yFvfOloP5eOAH1N5X+5ofbdafd8fyxudxpnfSXeQLqbyr9vd5Hr7/cE1B/+vv75K9O+ss9AfWnvz9vfOmS/rJPQP3p77dd0l/+Cag//f3vmPQ3wgTUn/4KvfVZWn8vmYD609+lnK9bKbu/F0xA/enva+Fb/Y0zAfWnv3KnX3H9PX0C6k9/66S/sSag/sL3N0/6G20C6i94f80y6W+8Cai/2P3NDkl/I05A/YXub1Ul/Y05AfUXuL9m3ib9jToB9Re3v/2h/BUpsr8nTkD9Re2vWfdJf2NPQP0F7W8Kw6/c/p42AfUXsr9N+c/8Cu+v3W6eEaD+AvbXrKuprEix/aX0lAD1F66/5lxPZ0UK7u8pAeovWH+LdT2lFSm5v2cEqL9Q/c3m1bRWpOj+nhCg/uL013ye2qmtSNn9PR6g/oL016x21QRXpPD+bg5wX+svbn+z87Ka5oqU3t+jE1B/b95fsz/v6umuSPH9PTgB9fem/TWz/eo8X9bttFek/P4em4D6K0n9LNWf93a2U1+RauiH/OlS9vn+j9cethrwks3rBx6wTwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADP9R8tVSF7N3KEkwAAAABJRU5ErkJggg=="},350:function(e,t,n){e.exports=n.p+"static/media/loader.8f677527.gif"},354:function(e,t,n){e.exports=n(970)},359:function(e,t,n){},405:function(e,t){},407:function(e,t){},439:function(e,t){},440:function(e,t){},538:function(e,t){},540:function(e,t){},575:function(e,t){},576:function(e,t){},594:function(e,t){},596:function(e,t){},613:function(e,t){},615:function(e,t){},619:function(e,t){},628:function(e,t){},630:function(e,t){},666:function(e,t){},668:function(e,t){},782:function(e,t){},968:function(e,t,n){},970:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(347),i=n.n(s),o=(n(359),n(30)),c=n(31),l=n(33),u=n(32),f=n(34),A=n(973),m=n(972),d=n(65),v=n.n(d),h=n(971),p=n(348),b=n.n(p),w=n(20),E=n.n(w),y=n(49),x=n(349),g=n.n(x)()("ipfs.infura.io","5001",{protocol:"https"});function P(e){return j.apply(this,arguments)}function j(){return(j=Object(y.a)(E.a.mark(function e(t){var n,a,r;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=JSON.stringify(t),a=g.types.Buffer.from(n),e.next=4,g.add(a);case 4:return r=e.sent,e.abrupt("return",r[0].hash);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function R(e){return N.apply(this,arguments)}function N(){return(N=Object(y.a)(E.a.mark(function e(t){var n,a;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.cat(t);case 2:return n=e.sent,a=n.toString("utf8"),e.abrupt("return",JSON.parse(a));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}window.ipfs=g,window.add=P,window.cat=R;var X={add:P,cat:R,isHash:function(e){return g.util.isIPFS.cid(e)}};function O(){var e=window.location.hash;e.startsWith("#/")?e=e.slice(2):e.startsWith("#")&&(e=e.slice(1));var t=e.split("/");return t.length<2?null:t.find(function(e){return X.isHash(e)})}var k=["results","form"],S=function(){var e=O();return r.a.createElement("nav",{className:"navbar navbar-expand-lg bg-secondary fixed-top text-uppercase",id:"mainNav"},r.a.createElement("div",{className:"container"},r.a.createElement("img",{src:b.a,style:{width:"130px"},alt:"logo"}),r.a.createElement("button",{className:"navbar-toggler navbar-toggler-right text-uppercase bg-primary text-white rounded",type:"button","data-toggle":"collapse","data-target":"#navbarResponsive","aria-controls":"navbarResponsive","aria-expanded":"false","aria-label":"Toggle navigation"},"Menu",r.a.createElement("i",{className:"fas fa-bars"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarResponsive"},r.a.createElement("ul",{className:"navbar-nav ml-auto"},k.map(function(t){return r.a.createElement("li",{key:t,className:"nav-item mx-0 mx-lg-1"},r.a.createElement(h.a,{className:"nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger",to:"/".concat(t).concat(e?"/"+e:"")},t))})))))},H=(r.a.Component,a.Component,n(130)),C=(n(346),n(350)),T=n.n(C),z=function(){return r.a.createElement("div",{className:"mx-auto text-center mt-4"},r.a.createElement("h5",{style:{opacity:.5}},"Loading..."),r.a.createElement("img",{src:T.a,alt:"loading"}))};function q(e,t){return e.map(function(e){return e[t]}).map(function(e,t,n){return n.indexOf(e)===t&&t}).filter(function(t){return e[t]}).map(function(t){return e[t]})}function V(e){return e?e.endsWith("?")?e:e+"?":e}var F=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).state={submissions:[]},e}return Object(f.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=Object(y.a)(E.a.mark(function e(){var t,n,a,r,s,i,o,c,l,u;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=O(),!X.isHash(t)){e.next=36;break}return this.setState({loading:!0}),e.next=6,X.cat(t);case 6:if(n=e.sent,console.log({hash:t,obj:n}),!(n.title&&n.questions&&Array.isArray(n.questions)&&n.submit)){e.next=32;break}if(this.setState({title:n.title,questions:n.questions,submit:n.submit,validForm:!0}),"rinkeby"!==(this.state.submit||{}).to){e.next=29;break}return a=new v.a("https://rinkeby.infura.io"),r=new a.eth.Contract(H,this.state.submit.address),e.next=15,r.getPastEvents("Submission",{fromBlock:"4001171"});case 15:s=e.sent,console.log({events:s}),i=s.map(function(e){for(var t=(e.returnValues.answers||"").replace("0x",""),a=[],r=0;r<n.questions.length;r++){var s=2*r,i=parseInt(t.slice(s,s+2),16);a.push({title:n.questions[r].title,answer:n.questions[r].answers[i],answerIndex:i})}return{answers:a,txHash:e.transactionHash,user:e.returnValues.user}}),console.log({submissions:i}),o=i.length,c=q(i,"user").map(function(e){return e.user}),l=q(i,"user").length,u={},i.forEach(function(e){e.answers.forEach(function(e,t){u[t]||(u[t]={});var n=e.answerIndex;u[t][n]=u[t][n]?u[t][n]+1:1})}),console.log(u),this.setState({submissions:i,totalResponses:o,uniqueResponses:l,questionsResults:u,uniqueAddresses:c}),this.setState({loading:!1}),e.next=30;break;case 29:this.setState({error:"Unsupported submit method"});case 30:e.next=34;break;case 32:this.setState({error:"Form obj is not correct"}),this.setState({loading:!1});case 34:e.next=37;break;case 36:this.setState({error:"No valid IPFS hash provided"});case 37:e.next=42;break;case 39:e.prev=39,e.t0=e.catch(0),this.setState({error:"Error: ".concat(e.t0.stack)});case 42:case"end":return e.stop()}},e,this,[[0,39]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return this.state.loading?r.a.createElement(z,null):this.state.loading||this.state.submissions.length?r.a.createElement("div",null,this.state.error?r.a.createElement("h5",null,"Error: ",this.state.error):null,r.a.createElement("h5",null,this.state.title),r.a.createElement("table",{className:"table",style:{maxWidth:"300px",borderWidth:"0px",padding:"0px",marginBottom:"0px"}},r.a.createElement("tbody",null,r.a.createElement("tr",{style:{fontSize:"80%",opacity:"0.7"}},r.a.createElement("td",null,"Total responses"),r.a.createElement("td",null,"Unique responses")),r.a.createElement("tr",{style:{fontSize:"300%"}},r.a.createElement("td",null,this.state.totalResponses),r.a.createElement("td",null,this.state.uniqueResponses)))),r.a.createElement("details",{className:"address-list"},r.a.createElement("summary",null,"Unique addresses list"),(this.state.uniqueAddresses||[]).map(function(e){return r.a.createElement("div",{key:e},e)})),r.a.createElement("h3",null,"Results"),(this.state.questions||[]).map(function(t,n){return r.a.createElement("div",{key:n,style:{marginTop:"20px"}},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-1"},r.a.createElement("h5",null,n+1)),r.a.createElement("div",{className:"col-11"},r.a.createElement("h5",null,V(t.title)))),t.answers.map(function(t,a){var s=(e.state.questionsResults||{})[n]||{},i=Object.values(s).reduce(function(e,t){return e+t},0),o=s[a]||0,c=i?Math.round(100*o/i)+"%":null;return r.a.createElement("div",{key:a},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-1"}),r.a.createElement("div",{className:"col-5"},t),r.a.createElement("div",{className:"col-6"},r.a.createElement("div",{className:"progress"},r.a.createElement("div",{className:"progress-bar",role:"progressbar",style:{width:c}},c)))))}))})):r.a.createElement("h5",null,"No submissions yet")}}]),t}(a.Component),B=n(131),D=n(181),W=n(352),U=new v.a("https://rinkeby.infura.io");window.web3=U;var L=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).state={title:null,questions:null,answers:{}},e}return Object(f.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=Object(y.a)(E.a.mark(function e(){var t,n;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=O(),!X.isHash(t)){e.next=11;break}return this.setState({loading:!0}),e.next=6,X.cat(t);case 6:n=e.sent,console.log({hash:t,obj:n}),n.title&&n.questions&&Array.isArray(n.questions)&&n.submit?(this.setState({title:n.title,questions:n.questions,submit:n.submit,validForm:!0}),this.setState({loading:!1})):(this.setState({error:"Form obj is not correct"}),this.setState({loading:!1})),e.next=12;break;case 11:this.setState({error:"No valid IPFS hash provided"});case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),this.setState({error:"Error: ".concat(e.t0.stack),loading:!1});case 17:case"end":return e.stop()}},e,this,[[0,14]])}));return function(){return e.apply(this,arguments)}}()},{key:"submit",value:function(){var e=Object(y.a)(E.a.mark(function e(t){var n,a,r,s,i,o,c,l;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.preventDefault(),n=Object.values(this.state.answers).map(function(e){if(isNaN(e))throw Error("Answer index must be a number");if(e>255)throw Error("Max number of possible answers for questions is 255");return parseInt(e).toString(16).padStart(2,"0")}),a="0x"+n.join(""),console.log({answerBytes:a,submit:this.state.submit}),"rinkeby"!==(this.state.submit||{}).to){e.next=28;break}if(!window.ethereum){e.next=25;break}return r=function(){var e=Object(y.a)(E.a.mark(function e(){return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,t){window.ethereum.sendAsync({method:"eth_sendTransaction",params:[c],from:window.ethereum.selectedAddress},function(n,a){n?t(n):e(a)})}));case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),e.next=10,window.ethereum.enable();case 10:if((s=new v.a("https://rinkeby.infura.io")).utils.isAddress(window.ethereum.selectedAddress)){e.next=13;break}throw Error("Could not get address from window.ethereum.selectedAddress ".concat(window.ethereum.selectedAddress));case 13:if(s.utils.isAddress(this.state.submit.address)){e.next=15;break}throw Error("Submit address is not valid: ".concat(this.state.submit.address));case 15:return i=new s.eth.Contract(H,this.state.submit.address),o=i.methods.submit(a).encodeABI(),c={to:this.state.submit.address,from:window.ethereum.selectedAddress,data:o},this.setState({submitting:!0}),e.next=21,r();case 21:l=e.sent,this.setState({submissionHash:(l||{}).result,submitting:!1}),e.next=26;break;case 25:this.setState({error:"You must have a recent version of metamask installed"});case 26:e.next=29;break;case 28:this.setState({error:"Unsupported submit method"});case 29:e.next=34;break;case 31:e.prev=31,e.t0=e.catch(0),this.setState({error:"Error: ".concat(e.t0.stack),submitting:!1,loading:!1});case 34:case"end":return e.stop()}},e,this,[[0,31]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=function(e,t){if(!t||!e)return!1;for(var n=0;n<t.length;n++)if(!(n in e))return!1;return!0}(this.state.answers,this.state.questions);if(console.log({answers:this.state.answers,questions:this.state.questions}),this.state.loading)return r.a.createElement(z,null);var n="rinkeby"===(this.state.submit||{}).to?"https://rinkeby.etherscan.io/tx/".concat(this.state.submissionHash):null;return r.a.createElement("div",null,this.state.validForm?r.a.createElement("div",null,r.a.createElement("h3",null,this.state.title),r.a.createElement("form",null,this.state.questions.map(function(t,n){var a=50+10*Math.max.apply(Math,Object(W.a)(t.answers.map(function(e){return e.length})))+"px";return r.a.createElement("div",{key:n,className:"mt-3"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-1"},r.a.createElement("h5",null,n+1)),r.a.createElement("div",{className:"col-11"},r.a.createElement("h5",null,V(t.title)))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-1"}),r.a.createElement("div",{className:"col-11"},t.answers&&Array.isArray(t.answers)?t.answers.map(function(t,s){var i=e.state.answers[n]===s?{backgroundColor:"#6c757d",color:"white"}:{};return r.a.createElement("div",{key:s},r.a.createElement("button",{type:"button",className:"btn btn-outline-secondary mt-1 text-left",onClick:function(){return e.setState({answers:Object(D.a)({},e.state.answers,Object(B.a)({},n,s))})},style:Object(D.a)({},i,{width:a,overflowWrap:"break-word"})},t))}):r.a.createElement("p",null,"Error, no valid answers"))))}),r.a.createElement("div",{className:"row mt-3"},r.a.createElement("div",{className:"col-1"}),r.a.createElement("div",{className:"col-11"},this.state.submitting?r.a.createElement("h6",null,"Submitting..."):this.state.submissionHash?r.a.createElement("div",null,r.a.createElement("h6",null,n?r.a.createElement("a",{href:n},"Submitted!"):"Submitted!"," ","Thank you for participating")):r.a.createElement("div",null,r.a.createElement("button",{type:"submit",className:"btn btn-primary",onClick:this.submit.bind(this),disabled:!t},"Submit"),r.a.createElement("p",{style:{opacity:.5,fontSize:"75%"}},"Submits to ",this.state.submit.to," ",this.state.submit.address)))))):null,this.state.error?r.a.createElement("h5",null,"Error: ",this.state.error):null)}}]),t}(a.Component),M=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h5",null,"Decentralized forms, for decentralized projects"),r.a.createElement("p",null,"Finally a way to collect feedback in a decentralized way!!"),r.a.createElement("a",{href:"".concat(window.location.origin).concat(window.location.pathname,"/#/form/QmckmTWYsSTgwsgBj45HAqRirC8WNXLo7FRr11tdN6yboY")},"Check a demo form"))}}]),t}(a.Component),G=(n(968),new v.a("https://rinkeby.infura.io"));window.web3=G,console.log("Version: 1552176415442");var I=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).state={title:null,questions:null},e}return Object(f.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(A.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(S,null),r.a.createElement("div",{className:"container",style:{marginTop:"140px"}},r.a.createElement(m.a,{path:"/",exact:!0,component:M}),r.a.createElement(m.a,{path:"/results",component:F}),r.a.createElement(m.a,{path:"/form",component:L}))))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(I,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[354,1,2]]]);
//# sourceMappingURL=main.7ee93c87.chunk.js.map